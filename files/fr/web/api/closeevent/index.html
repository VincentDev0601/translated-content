---
title: CloseEvent
slug: Web/API/CloseEvent
tags:
  - API
  - Interface
  - Reference
  - Web
  - WebSocket
translation_of: Web/API/CloseEvent
---
<p>{{APIRef("Websockets API")}}</p>

<p>Un événement CloseEvent est envoyé au client utilisant une <a href="/en-US/docs/Glossary/WebSockets">WebSocket </a>lorsque la connexion est fermée. Cet événement est envoyé au listener indiqué par l'attribut <code>onclose </code>de la WebSocket.</p>

<h2 id="Attributes" name="Attributes">Constructeur</h2>

<dl>
 <dt>{{domxref("CloseEvent.CloseEvent", "CloseEvent()")}}</dt>
 <dd>Construit un nouvel événement <code>CloseEvent</code>.</dd>
</dl>

<h2 id="Attributes" name="Attributes">Propriétés</h2>

<p><em>Cette interface hérite également des propriétés de sa mère, {{domxref("Event")}}.</em></p>

<dl>
 <dt>{{domxref("CloseEvent.code")}} {{readOnlyInline}}</dt>
 <dd>Retourne un <code>unsigned short</code> contenant le code de fermeture envoyé par le serveur. Les valeurs possibles sont données ci-dessous.
 <table class="standard-table">
  <tbody>
   <tr>
    <td class="header">Status code</td>
    <td class="header">Nom</td>
    <td class="header">Description</td>
   </tr>
   <tr>
    <td><code>0</code>–<code>999</code></td>
    <td> </td>
    <td><strong>Reservé et inutilisé.</strong></td>
   </tr>
   <tr>
    <td><code>1000</code></td>
    <td><code>CLOSE_NORMAL</code></td>
    <td>Fermeture normale ; la connexion s'est terminée normalement.</td>
   </tr>
   <tr>
    <td><code>1001</code></td>
    <td><code>CLOSE_GOING_AWAY</code></td>
    <td>
     <p>Reçu lorsque une erreur est apparue sur le serveur ou le navigateur quitte la page ayant ouvert la connexion.</p>
    </td>
   </tr>
   <tr>
    <td><code>1002</code></td>
    <td><code>CLOSE_PROTOCOL_ERROR</code></td>
    <td>L'autre partie de la connexion terminte la connexion à cause d'une erreur de protocole.</td>
   </tr>
   <tr>
    <td><code>1003</code></td>
    <td><code>CLOSE_UNSUPPORTED</code></td>
    <td>La connexion est terminée car le serveur à reçu des données d'un type qu'il ne peut pas accepter (par exemple des données binaire plutôt que du texte).</td>
   </tr>
   <tr>
    <td><code>1004</code></td>
    <td> </td>
    <td><strong>Réservé.</strong> Une utilisation pourrait être définie dans le futur.</td>
   </tr>
   <tr>
    <td><code>1005</code></td>
    <td><code>CLOSE_NO_STATUS</code></td>
    <td><strong>Réservé.</strong> Indique qu'aucun code n'est donné bien qu'un code était attendu.</td>
   </tr>
   <tr>
    <td><code>1006</code></td>
    <td><code>CLOSE_ABNORMAL</code></td>
    <td><strong>Réservé.</strong> Utilisé pour indiquer que la connexion a été terminée anormalement (sans paquet indiquant la fermeture).</td>
   </tr>
   <tr>
    <td><code>1007</code></td>
    <td> </td>
    <td>Le serveur termine la connexion car un message contenant des données incohérentes a été reçu (e.g., des données qui ne sont pas au format UTF-8 dans un message texte).</td>
   </tr>
   <tr>
    <td><code>1008</code></td>
    <td> </td>
    <td>Le serveur termine la connexion car un message ne respectant pas la politique du serveur est reçu. C'est un code d'état générique qui est utilisé lorsque les codes 1003 et 1009 ne correspondent pas à la situation.</td>
   </tr>
   <tr>
    <td><code>1009</code></td>
    <td><code>CLOSE_TOO_LARGE</code></td>
    <td>Le serveur termine la connexion car les données reçues sont trop grosses.</td>
   </tr>
   <tr>
    <td><code>1010</code></td>
    <td> </td>
    <td>Le client termine la connexion car il souhaitait négocier une ou plusieurs extensions mais le serveur ne l'a pas fait.</td>
   </tr>
   <tr>
    <td><code>1011</code></td>
    <td> </td>
    <td>Le serveur termine la connexion car il a rencontré un problème qui l'empêche de traiter la requête.</td>
   </tr>
   <tr>
    <td>–<code>1014</code></td>
    <td> </td>
    <td><strong>Réservé pour une utilisation future par le standard WebSocket.</strong></td>
   </tr>
   <tr>
    <td><code>1015</code></td>
    <td> </td>
    <td><strong>Réservé.</strong> Indique que la connexion a été fermée à cause d'une erreur durant le handshake TLS (e.g., le certificat du serveur ne peut pas être vérifié).</td>
   </tr>
   <tr>
    <td><code>1016</code>–<code>1999</code></td>
    <td> </td>
    <td><strong>Réservé pour une utilisation future par le standard WebSocket.</strong></td>
   </tr>
   <tr>
    <td><code>2000</code>–<code>2999</code></td>
    <td> </td>
    <td><strong>Réservé pour une utilisation future par le standard WebSocket.</strong></td>
   </tr>
   <tr>
    <td><code>3000</code>–<code>3999</code></td>
    <td> </td>
    <td>Disponible pour être utilisé par des bibliothèques ou des frameworks. Ces codes <strong>ne doivent pas</strong> être utilisés par des applications.</td>
   </tr>
   <tr>
    <td><code>4000</code>–<code>4999</code></td>
    <td> </td>
    <td>Disponible pour être utilisés par des applications.</td>
   </tr>
  </tbody>
 </table>
 </dd>
 <dt>{{domxref("CloseEvent.reason")}} {{readOnlyInline}}</dt>
 <dd>Retourne un {{ domxref("DOMString") }} qui indique la raison pour laquelle le serveur a fermé la connexion. Ce message est spécifique au serveur et au sous-protocole utilisé.</dd>
 <dt>{{domxref("CloseEvent.wasClean")}} {{readOnlyInline}}</dt>
 <dd>Retourne un {{jsxref("Boolean")}} qui indique si la connexion a été correctement fermée ou non.</dd>
</dl>

<h2 id="Méthodes">Méthodes</h2>

<p><em>Cette interface hérite également des propriétés de sa mère, {{domxref("Event")}}.</em></p>

<dl>
 <dt>{{domxref("CloseEvent.initCloseEvent()")}} {{Non-standard_inline}} {{Obsolete_inline}}</dt>
 <dd>Initialise la valeur d'un <code>CloseEvent</code>. Si l'événement a déjà été envoyé, cette méthode ne fait rien.</dd>
</dl>

<h2 id="Compatibilité_des_navigateurs">Compatibilité des navigateurs</h2>

<p>{{ CompatibilityTable() }}</p>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>Support de base</td>
   <td>{{ CompatUnknown() }}</td>
   <td>{{ CompatGeckoDesktop("8.0") }} [1][2]</td>
   <td>{{ CompatUnknown() }}</td>
   <td>{{ CompatUnknown() }}</td>
   <td>{{ CompatUnknown() }}</td>
  </tr>
  <tr>
   <td><code>initCloseEvent</code><code>()</code> {{Non-standard_inline}}</td>
   <td>{{CompatNo}}</td>
   <td>{{ CompatGeckoDesktop("8.0") }}<br>
    Removed in {{CompatGeckoDesktop("41") }}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Support de base</td>
   <td>{{ CompatUnknown() }}</td>
   <td>{{ CompatGeckoMobile("8.0") }}</td>
   <td>{{ CompatUnknown() }}</td>
   <td>{{ CompatUnknown() }}</td>
   <td>{{ CompatUnknown() }}</td>
  </tr>
  <tr>
   <td><code>initCloseEvent</code><code>()</code> {{Non-standard_inline}}</td>
   <td>{{CompatNo}}</td>
   <td>{{ CompatGeckoMobile("8.0") }}<br>
    Removed in {{CompatGeckoMobile("41") }}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
   <td>{{CompatNo}}</td>
  </tr>
 </tbody>
</table>
</div>

<p>[1] Avant Gecko 8.0 {{ geckoRelease("8.0") }}, Gecko envoyait l'événement {{event("close")}} des WebSocket au listener en tant que simple événement. Le support de l'événement <code>CloseEvent</code> a été implémenté dans Gecko 8.0.</p>

<p>[2] Avant Gecko 12.0 {{ geckoRelease("12.0") }}, Gecko envoyait le code de fermeture <code>CLOSE_NORMAL</code> quand la connexion était fermée à cause d'une erreur inconnue, ou si elle était fermée à cause d'une erreur que la spécification ne couvre pas. Maintenant, <code>CLOSE_GOING_AWAY</code> est envoyé à la place.</p>

<h2 id="Voir_aussi">Voir aussi</h2>

<ul>
 <li><a href="/en/WebSockets/WebSockets_reference/WebSocket" title="en/WebSockets/WebSockets reference/WebSocket"><code>WebSocket</code></a></li>
</ul>

<p> </p>
