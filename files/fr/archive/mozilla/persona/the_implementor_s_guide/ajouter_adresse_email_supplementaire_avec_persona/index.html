---
title: Ajouter des adresses e-mail supplémentaires avec Persona
slug: >-
  Archive/Mozilla/Persona/The_implementor_s_guide/Ajouter_adresse_email_supplementaire_avec_Persona
tags:
  - Persona
translation_of: >-
  Archive/Mozilla/Persona/The_implementor_s_guide/Adding_extra_email_addresses_with_Persona
---
<p>C'est une bonne idée de permettre à vos utilisateurs d'ajouter des adresses e-mail supplémentaires à leurs comptes. Ceci leur permet de <a href="/fr/Persona/The_implementor_s_guide/permettre_utilisateurs_changer_adresse_email">changer leurs adresses e-mail</a>, et d'accéder à leur compte même s'ils sont dans l'impossibilité d'accéder à leur compte e-mail principal.</p>
<p>Vous devrez vérifier les adresses supplémentaires. Vous pouvez le faire manuellement, en envoyant un e-mail contenant un lien de vérification à la nouvelle adresse, ou le faire en utilisant Persona.</p>
<p>Si vous utilisez Persona pour ajouter des adresses e-mail, il vous faut alors faire attention à plusieurs points : rendez le contexte de la requête explicite, et mettez à jour la valeur passer dans <code>loggedInUser </code>pour assurer que la transaction n'est pas cassée par le gestionnaire de session de Persona</p>
<h3 id="Clarifier_le_context_de_la_requête">Clarifier le context de la requête</h3>
<p>Quand vous requêtez une nouvelle assertion en utilisant soit la vieille API <a href="/fr/docs/Web/API/Navigator/id/get" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>navigator.id.get()</code></a> ou l'API <a href="/fr/docs/Web/API/Navigator/id/request" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>navigator.id.request()</code></a>, Persona part du principe que l'utilisateur est en train d'essayer de se connecter au site web, et l'interface utilisateur est affiché en conséquence. Si vous utilisez Persona seulement pour vérifier une nouvelle adresse e-mail, votre site doit expliquer ceci clairement aux utilisateurs, afin qu'ils ne soient pas étonnés par la fenêtre de Persona.</p>
<h3 id="Mettre_à_jour_loggedInUser">Mettre à jour <code>loggedInUser</code></h3>
<p>Si vous utilisez l'API <a href="/fr/docs/Web/API/Navigator/id/get" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>navigator.id.get()</code></a> sur l'ensemble de votre site, alors vous pouvez simplement faire un nouvel appel à <a href="/fr/docs/Web/API/Navigator/id/get" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>navigator.id.get()</code></a> pour obtenir la nouvelle adresse e-mail.</p>
<p>Mais si vous utilisez <a href="/fr/docs/Web/API/Navigator/id/request" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>navigator.id.request()</code></a>, il vous faut alors utiliser <a href="/fr/docs/Web/API/Navigator/id/request" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>navigator.id.request()</code></a> pour obtenir l'adresse e-mail supplémentaire. Dans ce cas, quand vous avez vérifié l'assertion dans votre gestionnaire <code>onlogin</code>, vous devez mettre à jour l'argument <code>loggedInUser</code> de <a href="/fr/docs/Web/API/Navigator/id/watch" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>navigator.id.watch()</code></a> avec la nouvelle adresse.</p>
<p>Si vous ne le faîtes pas, il y aura une mauvaise correspondance : Persona pensera que l'utilisateur connecté est <code>nouvelle_adresseemail@example.org</code>, mais votre site web dira que l'utilisateur connecté est <code>vieille_adresseemail@example.org</code>. Persona réagira en déclenchant <code>onlogin </code>avec une assertion pour <code>nouvelle_adresseemail@example.org</code>, que votre site web reconnatra sûrement comme un nouveau utilisateur souhaitant se connecter.</p>
