---
title: 自動テストのTipsとトリック
slug: Automated_testing_tips_and_tricks
translation_of: Archive/Mozilla/Automated_testing_tips_and_tricks
---
<ul> <li>TODO: <ul> <li>ツリーのどこかに例示用のコードをチェックインしてください。</li> </ul> </li> <li>すべてのプラットフォームで、ブラウザを終了するにはどうすればよいでしょうか。 <ul> <li>Macでは最後のウィンドウのwindow.close()はアプリケーションを終了しません。</li> <li><a class=" external" href="http://people.mozilla.com/~davel/scripts/">http://people.mozilla.com/~davel/scripts/</a> - quit.jsとquit.xulを見てください。</li> <li>appdir/<a class=" external" href="chromeにあるインストールマニフェストファイルはquit.jsとquit.xulがあるディレクトリをchrome://tests/contentにマップしています">chromeにあるインストールマニフェストファイルはquit.jsとqu...ntentにマップしています</a>。 <ul> <li>例: <code>content tests <a class=" external">file:///Users/davel/Work/tests/</a></code></li> </ul> </li> <li>アプリケーションを以下のコマンドラインオプションを付けて起動してください： <code>-chrome <a class=" external">chrome://tests/content/quit.xul</a></code></li> </ul> </li> <li>コマンドラインから新しいプロファイルを作るにはどうすればよいでしょうか。 <ul> <li>最初に、プロファイルエントリをprofiles.iniに追加してprefs.jsを伴った新しいプロファイルディレクトリを用意するために、<code>-CreateProfile </code>コマンドラインオプションを使います。 <ul> <li><code>firefox-bin -CreateProfile "testprofile ${PROFILE_DIR}/testprofile"</code></li> </ul> </li> <li>次に、他のデフォルトの設定でプロファイルディレクトリを初期化するために、Firefoxを起動します。 <ul> <li><code>firefox-bin -P testprofile -chrome <a class=" external">chrome://tests/content/quit.xul</a>&lt;code&gt; </code></li> <li>上記のプロセスは、プロファイルが完全に作られるよりも前に終了するでしょう。テスト用スクリプトで、上記コマンドを実行してから5秒ほど待つようにすると、次のテストスクリプトを実行するコマンドの前に、プロファイルを確実に作ることができます。</li> </ul> </li> </ul> </li> <li>新しいプロファイルで <code>dump</code> を有効にするにはどうすればよいでしょうか。 <ul> <li><code>user_pref("browser.dom.window.dump.enabled", true);</code> を profiledir/user.js に追加してください。</li> </ul> </li> <li>テスト用のコードをChrome特権付きで動作させるにはどうすればよいでしょうか。 <ul> <li>Chrome docを使ってください。例として、 <a class=" external" href="http://people.mozilla.com/~davel/scripts/">http://people.mozilla.com/~davel/scripts/</a> にあるsbtests.xulを参照してください。 <ul> <li><code>firefox-bin -P sbtestprofile -chrome <a class=" external">chrome://sbtests/content/</a></code></li> </ul> </li> <li>上記のコードは、テストが完了した後にquit.jsの中の終了用の関数を呼びます。</li> </ul> </li> <li>Chromeで内容のonloadイベントを検知するにはどうすればよいでしょうか。 <ul> <li><code>DOMContentLoaded</code>イベントを使ってください。 <ul> <li><code>chromeWindow.addEventListener('DOMContentLoaded',callbackFunction,false);</code></li> </ul> </li> </ul> </li>
</ul>
<p></p>
