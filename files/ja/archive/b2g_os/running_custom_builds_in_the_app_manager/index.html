---
title: WebIDEでのFirefox OS/Gaia のカスタマイズビルドの実行方法
slug: Archive/B2G_OS/Running_custom_builds_in_the_App_Manager
translation_of: Archive/B2G_OS/Developing_Gaia/Running_custom_builds_in_WebIDE
---
<div class="summary">
 <p><span class="seoSummary">2014年後半、Firefox OSシミュレータは機能追加され、カスタムビルドしたシミュレータを起動できるようになりました。本ドキュメントでは設定方法と</span><a href="/en-US/docs/Tools/WebIDE" style="line-height: 1.5;">WebIDE</a>を使用しての起動方法を記載しています。</p>
</div>
<h2 id="準備"><span style="font-size: 2.14285714285714rem;">準備</span></h2>
<p>まず最初にカスタムビルドしたシミュレータを動かす為の環境を整備しましょう。</p>
<ol>
 <li><span style="line-height: 1.5;">Firefox をインストールし </span><a href="/en-US/docs/Tools/WebIDE" style="line-height: 1.5;">WebIDE</a> を有効化します<span style="line-height: 1.5;"> (</span><em>ツール &gt; Web 開発 &gt; WebIDE</em><span style="line-height: 1.5;">)。</span></li>
 <li>最新の <a href="http://nightly.mozilla.org/">B2G Desktop Nightly</a> をインストールするか <a href="https://developer.mozilla.org/en-US/Firefox_OS/Using_the_B2G_desktop_client#Building_the_desktop_client">自分でビルド</a>して下さい。</li>
 <li><a href="https://ftp.mozilla.org/pub/mozilla.org/labs/fxos-simulator/">最新の Firefox OS simulator</a> (7.0pre7.20140113以上)のアドオンをインストールしてください。</li>
 <li>Gaiaを <code>SIMULATOR=1 </code>を付与しビルドします。例として、Gaiaディレクトリ直下で <code>make SIMULATOR=1 PROFILE_FOLDER=profile-b2g</code> としてビルドします( <a href="/en-US/Firefox_OS/Platform/Gaia/Hacking#Make_options">Hacking Gaia</a> に詳しい説明が記載されています)。</li>
</ol>
<h2 id="シミュレータの設定">シミュレータの設定</h2>
<p>カスタムビルドしたGaia, B2G Desktopを使用してシミュレータを動かすための設定を記載します。</p>
<ol>
 <li><span style="line-height: 1.5;">アドオンマネージャを表示してください(ツール</span><em> &gt; アドオン</em><span style="line-height: 1.5;">, もしくはURL欄に </span><code style="font-style: normal; line-height: 1.5;">about:addons</code><span style="line-height: 1.5;"> と入力)。</span></li>
 <li>インストール済みのアドオンを表示するため拡張機能タブを選択します。</li>
 <li>Firefox OS シミュレータのアドンが表示されているでしょう。例えば、<em>Firefox OS 1.3 Simulator 7.0pre.7.20140113</em>.といった様に表示されているはずです。</li>
 <li>インストール済みのシミュレータから<em>設定</em>ボタンをクリックします。<br>
  <img alt="the Firefox OS simulator preferences: Preferences, disable and remove." src="https://mdn.mozillademos.org/files/7241/about-addon.png" style="margin-right: auto; margin-left: auto; height: 63px; width: 1247px; display: block;"></li>
 <li>WebIDEからカスタムビルドした実行環境(最新のB2G Desktop)を起動したくなるでしょう。<em> <em>Select a custom runtime executable</em> </em>の <em>選択</em>をクリックし選択することができます。Windows/Linuxでは明確かと思います。Macでは<span style="font-family: 'Courier New', 'Andale Mono', monospace;">/Applications/B2G.app/Contents/MacOS/b2g </span>に存在し、<span style="font-family: 'Courier New', 'Andale Mono', monospace;">Applications</span>ディレクトリにインストールされています。</li>
 <li><em><em>Select a custom Gaia profile directory</em></em> も同様に選択することができ、WebIDEで動作するGaiaを変更することができます。この際、カスタムビルドしたGaiaを選択可能です(<em>gaia/profile-b2g</em>を選択してください)。</li>
 <li><span style="line-height: 1.5;">カスタマイズしていないシミュレータに戻したい場合、は設定をリセットする必要があります。この際、アドオンを再インストールしたり削除したりするのではなく、新しいタブを開きURL欄に<em> about:config</em> と入力してください。その後、検索欄に fxos や simulator と入力し、"extensions.fxos_2_0_simulator@mozilla.org.customRuntime"  もしくは "extensions.fxos_2_0_simulator@mozilla.org.gaiaProfile" の設定値を見つけてください。これを右クリックし リセットを選択し、シミュレータを再起動することでカスタマイズしていないシミュレータに戻ります。</span></li>
</ol>
<h2 id="設定済みのシミュレータの使用方法">設定済みのシミュレータの使用方法</h2>
<p>最後にカスタマイズしたシミュレータを使用してみましょう。</p>
<ol>
 <li> <a href="/en-US/docs/Tools/WebIDE">WebIDE</a> (<em>ツール &gt; Web 開発 &gt; WebIDE</em>) を選択します(また Shift-F8 を押しても同様の結果を得られます )。</li>
 <li>メニューの一番右上のボタンをクリックします。</li>
 <li>Firefox OS 1.3 (もしくはインストール済みの最新バージョンなど)をクリックします。これはカスタマイズしたものを設定したシミュレータとなります。</li>
 <li>シミュレータは起動するでしょう。カスタマイズビルドした B2G Desktop 、Gaiaが起動します。</li>
</ol>
<p><img alt="a screenshot of the b2g desktop simulator " src="https://mdn.mozillademos.org/files/7239/b2g-desktop.png" style="width: 434px; height: 616px; display: block; margin: 0px auto;"></p>
<h2 id="b2gのカスタムバイナリのビルド" style="margin-bottom: 20px; padding-top: 0px; padding-left: 0px; border: 0px; line-height: 30px; font-size: 2.14285714285714rem;"><a name="custom-b2g" style="padding-left: 0px; border: 0px;">b2gのカスタムバイナリのビルド</a></h2>
<p style="padding-top: 0px; padding-left: 0px; border: 0px;">これは任意の手順となります。もしも自分で作った<a href="https://developer.mozilla.org/en-US/docs/mozilla-central">mozilla-central</a>のパッチをテストするときに有用な方法となります。</p>
<div class="note" style="padding-top: 10px; padding-left: 15px; border: 5px solid rgba(231, 228, 157, 0.14902);">
 <p style="padding-top: 0px; padding-left: 0px; border: 0px;"><strong style="line-height: 1.5;">注記</strong><span style="line-height: 1.5;">: ビルドをすることで、どのB2G Desktop プラットフォームであってもビルドディレクトリにアドオンが生成されます。カスタムビルドしたシミュレータを使用するには最も簡単な方法になります。</span></p>
</div>
<ol>
 <li><a href="https://developer.mozilla.org/en-US/docs/mozilla-central">mozilla-central</a>のコードをチェックアウトしてきて下さい</li>
 <li>あなたがテストしたいパッチを適用して下さい</li>
 <li>mozconfigに以下の定義が含まれることを確認して下さい:<br>
  <code>ac_add_options --enable-application=b2g<br>
  FXOS_SIMULATOR=1<br>
  GAIADIR=/home/alex/gaia    # 必須(FXOS_SIMULATOR設定時) xpiファイルを作成する場合に指定する<br>
  MOZTTDIR=/path/to/moztt   # オプション フォントファイル</code></li>
 <li>
  <p style="padding-top: 0px; padding-left: 0px; border: 0px;"><code>./mach build &amp;&amp; ./mach package を実行する</code></p>
 </li>
 <li>
  <p style="padding-top: 0px; padding-left: 0px; border: 0px;">GAIADIRを指定していれば、あなたのobdir配下にアドオンであるシミュレータのxpiファイルが生成されています。</p>
 </li>
</ol>
