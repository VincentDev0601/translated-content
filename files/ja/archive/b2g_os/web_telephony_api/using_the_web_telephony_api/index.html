---
title: Web Telephony API の使用
slug: Archive/B2G_OS/Web_Telephony_API/Using_the_Web_Telephony_API
tags:
  - Advanced
  - B2G
  - Certified
  - Firefox OS
  - Phone
  - Telephony
  - Web Telephony
translation_of: Archive/B2G_OS/Web_Telephony_API/Using_the_Web_Telephony_API
---
<p></p><section class="Quick_links" id="Quick_Links">

<ol>
  <li class="toggle">
      <details>
          <summary>Build and install</summary>
          <ol>
            <li><strong><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS">Build and install overview</a></strong></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_OS_build_process_summary">B2G OS build process summary</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/B2G_OS_build_prerequisites">Build prerequisites</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Preparing_for_your_first_B2G_build">Preparing for your first build</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building">Building B2G OS</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_installer_add-on">B2G installer add-on</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/Building_for_Flame_on_OS_X">Building B2G OS for Flame on Mac OS X</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Choosing_how_to_run_Gaia_or_B2G">Choosing how to run Gaia or B2G OS</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/Compatible_Devices">Compatible Devices</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Installing_on_a_mobile_device">Installing B2G OS on a mobile device</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_OS_update_packages">Creating and applying B2G OS update packages</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building/FOTA_community_builds">Building and installing FOTA community builds</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_Build_Variables_Reference_Sheet">B2G build variables reference sheet</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Porting B2G OS</summary>
          <ol>
            <li><strong><a href="/ja/docs/Mozilla/B2G_OS/Porting_B2G_OS">Porting overview</a></strong></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Porting_B2G_OS/basics">Porting basics</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Porting_B2G_OS/Porting_on_CyanogenMod">Porting on CyanogenMod</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Developing Gaia</summary>
          <ol>
            <li><strong><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia">Developing Gaia overview</a></strong></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Running_the_Gaia_codebase">Running the Gaia codebase</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Mulet">Run Gaia on desktop using Mulet</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Understanding_the_Gaia_codebase">Understanding the Gaia codebase</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Making_Gaia_code_changes">Making Gaia code changes</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Testing_Gaia_code_changes">Testing Gaia code changes</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Submitting_a_Gaia_patch">Submitting a Gaia patch</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Build_System_Primer">Gaia build system primer</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Different_ways_to_run_Gaia">Different ways to run Gaia</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/make_options_reference">Make options reference</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Gaia_tools_reference">Gaia tools reference</a></li>
          </ol>
      </details>
  </li>
  <li><a href="/ja/docs/Mozilla/B2G_OS/API">B2G OS APIs</a></li>
</ol>
</section><p></p>

<p class="summary">この記事は、<a href="/docs/Web/API/Web_Telephony_API">Web Telephony API</a> を使い始めるための基本を説明します。</p>

<h2 id="Manifest_許可設定">Manifest 許可設定</h2>

<p>Firefox OS アプリでこの API を使用するには、<code>manifest.webapp</code> ファイルに次の内容を記述する必要があります:</p>

<pre class="brush: json">"type": "certified",
"permissions": {
  "telephony": {
    "description": "Required to control telephony functions"
  }
},
</pre>

<h2 id="Accessing_the_API" name="Accessing_the_API">API アクセス</h2>

<p>端末の電話機能へアクセスするための開始点は、<code>Navigator.mozTelephony</code> です。このオブジェクトの参照を得れば、通話の発信と着信を始められます。</p>

<pre class="brush: js">// Telephony object
var tel = navigator.mozTelephony;
</pre>

<h2 id="Inspecting_the_device_hardware" name="Inspecting_the_device_hardware">端末ハードウェアの調査</h2>

<p>返される <a href="/ja/docs/Web/API/Telephony" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>Telephony</code></a> オブジェクトは、電話機のハードウェアをプログラム的に表し、その多くのアスペクトを制御する機能を与えます。例えば、消音や消音解除、スピーカーフォンの有効化と無効化などです:</p>

<pre class="brush: js">// Check if the phone is muted (read/write property)
console.log(tel.muted);

// Check if the speaker is enabled (read/write property)
console.log(tel.speakerEnabled);
</pre>

<h2 id="Making_calls" name="Making_calls">発信</h2>

<p>通話の発信は、<code>Telephony</code> オブジェクトで <a href="/ja/docs/Web/API/Telephony/dial" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>Telephony.dial</code></a> を呼び出すだけの簡単なものです。これは、Firefox OS 1.4 以降で使用できる Promise ベースの API です (以前は標準のコールバック関数でした)。これは、resolve で通話を表す <a href="/ja/docs/Web/API/TelephonyCall" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>TelephonyCall</code></a> オブジェクトを返します。このオブジェクトには、いくつものプロパティ、メソッド、イベントハンドラが含まれており、通話のプロパティを監視し、通話の <a href="/ja/docs/Web/API/TelephonyCall/hangUp" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>ハングアップ</code></a> や <a href="/ja/docs/Web/API/TelephonyCall/hold" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>保留</code></a> などの操作ができ、通話状態の変化に対する動作も指定できます。</p>

<pre class="brush: js">// Place a call
var call = tel.dial("123456789").then(function(call) {

  // Events for that call
  call.onstatechange = function (event) {
      /*
          Possible values for state:
          "dialing", "ringing", "busy", "connecting", "connected",
          "disconnecting", "disconnected", "incoming"
      */
      console.log(event.state);
  };

  // Above options as direct events
  call.onconnected = function () {
      // Call was connected
  };

  call.ondisconnected = function () {
      // Call was disconnected
  };
});
</pre>

<h2 id="Receiving_calls" name="Receiving_calls">着信</h2>

<p>通話の着信は、発信と異なりますが単純です。着信時に発動する <a href="/ja/docs/Web/API/Telephony/onincoming" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>Telephony.onincoming</code></a> イベントリスナを書く必要があります。この関数は、<code>call</code> プロパティを含むイベントオブジェクト (<a href="/ja/docs/Web/API/CallEvent" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>CallEvent</code></a>) が含まれます。このプロパティは、通話の <a href="/ja/docs/Web/API/TelephonyCall" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>TelephonyCall</code></a> オブジェクトへのアクセスを取得し、<a href="/ja/docs/Web/API/TelephonyCall/answer" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>呼び出しへの応答</code></a> などの動作ができます。</p>

<pre class="brush: js">// Receiving a call
tel.onincoming = function (event) {
  var incomingCall = event.call;

  // Get the number of the incoming call
  console.log(incomingCall.id);

  // Answer the call
  incomingCall.answer();

  // Let's say we have a button set up to hang up the call when pressed.
  hangupButton.onclick = function() {
    // Disconnect a call
    call.hangUp();
  }
};
</pre>

<p>複数の通話を端末上で同時にアクティブにすることが可能です。<a href="/ja/docs/Web/API/Telephony/calls" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>Telephony.calls</code></a> プロパティを通じて各通話をイテレートし、それぞれに対して適切な動作を行ってください。</p>

<pre class="brush: js">// Iterating over calls, and taking action depending on their changed status
tel.oncallschanged = function (event) {
  tel.calls.forEach(function (call) {
    // Log the state of each call
    console.log(call.state);
  });
};
</pre>

<h2 id="Specifications" name="Specifications">仕様</h2>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">仕様</th>
   <th scope="col">状態</th>
   <th scope="col">コメント</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><a class="external" href="https://wiki.mozilla.org/WebAPI/WebTelephony" hreflang="en" lang="en" title="Web Telephonyの仕様書">Web Telephony</a></td>
   <td><span class="spec-Draft">ドラフト</span></td>
   <td>Draft</td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility" name="Browser_compatibility">ブラウザ実装状況</h2>

<p>明らかな理由により、サポートはモバイルブラウザが優先されます。</p>

<p></p><p class="warning"><strong><a href="https://github.com/mdn/browser-compat-data">現在、互換性データを可読形式の JSON フォーマットに置き換えているところです。</a></strong>
            この互換性一覧は古い形式を使っており、これに含まれるデータの置き換えが済んでいません。
            <strong><a href="/ja/docs/MDN/Contribute/Structures/Compatibility_tables">手助けしていただける場合は、こちらから！</a></strong></p>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>デスクトップ</a></li>
        <li><a>モバイル</a></li>
    </ul>
</div><p></p>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>機能</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>基本サポート</td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td><span style="color: #f00;">未サポート</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>機能</th>
   <th>Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS (Gecko)</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>基本サポート</td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td>12.0 (12.0)</td>
   <td>1.0.1</td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td><span style="color: #f00;">未サポート</span></td>
  </tr>
  <tr>
   <td><code>id</code> と <code>secondId</code></td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td>30.0 (30.0)</td>
   <td>2.0</td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td><span style="color: #f00;">未サポート</span></td>
  </tr>
  <tr>
   <td><code>disconnectedReason</code></td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td>37.0 (37.0)</td>
   <td>2.2</td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td><span style="color: #f00;">未サポート</span></td>
  </tr>
 </tbody>
</table>
</div>

<h2 id="See_also" name="See_also">関連情報</h2>

<ul>
 <li><a href="/docs/Web/Guide/Telephony">WebTelephony</a></li>
</ul>
