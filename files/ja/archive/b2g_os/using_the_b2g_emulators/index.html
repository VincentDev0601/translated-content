---
title: B2G エミュレータを使用する
slug: Archive/B2G_OS/Using_the_B2G_emulators
tags:
  - Firefox OS
translation_of: Archive/B2G_OS/Using_the_B2G_emulators
---
<p></p><section class="Quick_links" id="Quick_Links">

<ol>
  <li class="toggle">
      <details>
          <summary>Build and install</summary>
          <ol>
            <li><strong><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS">Build and install overview</a></strong></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_OS_build_process_summary">B2G OS build process summary</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/B2G_OS_build_prerequisites">Build prerequisites</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Preparing_for_your_first_B2G_build">Preparing for your first build</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building">Building B2G OS</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_installer_add-on">B2G installer add-on</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/Building_for_Flame_on_OS_X">Building B2G OS for Flame on Mac OS X</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Choosing_how_to_run_Gaia_or_B2G">Choosing how to run Gaia or B2G OS</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/Compatible_Devices">Compatible Devices</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Installing_on_a_mobile_device">Installing B2G OS on a mobile device</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_OS_update_packages">Creating and applying B2G OS update packages</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building/FOTA_community_builds">Building and installing FOTA community builds</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_Build_Variables_Reference_Sheet">B2G build variables reference sheet</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Porting B2G OS</summary>
          <ol>
            <li><strong><a href="/ja/docs/Mozilla/B2G_OS/Porting_B2G_OS">Porting overview</a></strong></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Porting_B2G_OS/basics">Porting basics</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Porting_B2G_OS/Porting_on_CyanogenMod">Porting on CyanogenMod</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Developing Gaia</summary>
          <ol>
            <li><strong><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia">Developing Gaia overview</a></strong></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Running_the_Gaia_codebase">Running the Gaia codebase</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Mulet">Run Gaia on desktop using Mulet</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Understanding_the_Gaia_codebase">Understanding the Gaia codebase</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Making_Gaia_code_changes">Making Gaia code changes</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Testing_Gaia_code_changes">Testing Gaia code changes</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Submitting_a_Gaia_patch">Submitting a Gaia patch</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Build_System_Primer">Gaia build system primer</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Different_ways_to_run_Gaia">Different ways to run Gaia</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/make_options_reference">Make options reference</a></li>
            <li><a href="/ja/docs/Mozilla/B2G_OS/Developing_Gaia/Gaia_tools_reference">Gaia tools reference</a></li>
          </ol>
      </details>
  </li>
  <li><a href="/ja/docs/Mozilla/B2G_OS/API">B2G OS APIs</a></li>
</ol>
</section><p></p>

<div class="summary">
<p>この記事は、Boot to Gecko エミュレータを使用する際に知っておくべき重要な事項を要約したガイドです。完全なユーザマニュアルではなく、代わりにいくつかの有益な事項を、あなた自身が学ばなくてもいいように、簡単に説明します。</p>
</div>

<p>このガイドは、既にエミュレータをビルドしていることを前提としています。もしまだなら、<a href="/ja/Mozilla/Boot_to_Gecko/Building_and_installing_Boot_to_Gecko" title="ja/Mozilla/Boot_to_Gecko/Building_and_installing_Boot_to_Gecko">FirefoxOS のビルドとインストール</a>に巻き戻ってください！</p>

<h2 id="B2G_エミュレータについて">B2G エミュレータについて</h2>

<p>B2G エミュレータは 2 種類あります。ひとつは、<code>config.sh</code> を実行する際に "emulator" 用に構成されたビルドによるもので、ARM デバイスエミュレータです。x86 プロセッサをエミュレートしたものよりもずっと遅いのですが、安定しており実際のデバイスが行うような正確な表示です。<code>config.sh</code> を実行する際に "emulator-x86" として構成したものは、x86 デバイスエミュレータとなります。</p>

<div class="note"><strong>Note:</strong> 最近数ヶ月、自動化チームは安定性の問題のため、x86エミュレーターの使用を停止しました。すなわち、 emulator-x86の全てにおいて、うまく動作しない可能性がかなりあります。そうしない理由がない限り、ARMエミュレータを使用してください。</div>

<p>一旦エミュレータを選択、構成して、ビルドしたら、残りの作業はユーザ的観点から同じやり方ですので、このガイドの残りの部分はどちらにも共通です。</p>

<div class="note"><strong>注意 :</strong> Mac OS X では、B2G エミュレータは Core 2 Duo プロセッサ以降、Mac OS X 10.7 "Lion" と互換性のあるシステムが必要です。実際に Lion を稼働させている必要はありませんが、互換性がなければいけません。</div>

<h2 id="エミュレータを起動する">エミュレータを起動する</h2>

<p>B2G エミュレータを起動するには、以下のコマンドを入力してください :</p>

<pre>./run-emulator.sh
</pre>

<p>これで、エミュレータのスタートアップタスクを全て処理します。では、エミュレー タが起動して、Boot to Gecko が立ち上がるのを根気よく待ってください。2 分程かかるかもしれませんが、我慢してください。</p>

<h2 id="エミュレータが起動しなかった場合">エミュレータが起動しなかった場合</h2>

<p>エミュレータは、よく起動に失敗します。超最先端テクノロジにようこそ！ここに問題を解決するいくつかのヒントがあります。</p>

<h3 id="VM内で試していますか">VM内で試していますか?</h3>

<p>VirtualBox とParallels はグラフィックアクセラレータのサポートに問題の多いことが原因で、エミュレータやOpenGL端末のブート時に失敗を起こします。端末がブート開始し、失敗し、再起動するループに入ったり、起動するがエミュレータ画面に何も表示されなかったりします。不幸にも解決方法はありません (VirtualBox用の<a href="http://www.digitalmihailo.com/setting-up-ubuntu-12-04-virtual-machine-for-firefox-os-build/">回避策</a>はあります) - VMWare Player (振込ウェア), Workstation あるいは Fusionを使う必要があります。VirtualBoxでは - ゲストのアドオンをインストールしない、またはvboxvideoモジュールを無効化します。</p>

<h3 id="adb_サーバが動作しているか確認する">adb サーバが動作しているか確認する</h3>

<p>通常エミュレータが動作しない原因は、エミュレート端末との対話を行う adb サーバが実行されないか、もしくは正しく機能していないことです。この場合、通常はエミュレータを起動したターミナル内に下記のエラーメッセージが見られます。</p>

<pre class="language-html"><code class="language-html">emulator: control console listening on port 5554, ADB on port 5555
emulator: can't connect to ADB server: Connection refused</code></pre>

<div class="note">
<p><strong>注意 :</strong> もし、B2G ビルドシステムによってビルドされた <code>adb</code> を使用しているなら（多分そのはずですが）<code> $B2G/out/host/&lt;platform&gt;/bin</code> ディレクトリにあります。Mac では、これが、例えば、<code> $B2G/out/host/darwin-x86/bin</code> にあります。</p>
</div>

<p><code>adb</code> が実行されているか確認するには、このようにしてください :</p>

<pre>ps aux | grep adb
</pre>

<p>もし存在したら、多分正しく動作していないので、これを実行して強制停止してください。</p>

<pre>adb kill-server
</pre>

<p>存在しなかったら、これを実行してください :</p>

<pre>adb start-server
</pre>

<p>それから、もう一度エミュレータを実行してみてください。もし、それでも動作しなかったら、irc.mozilla.org の <a class="link-irc" href="irc://irc.mozilla.org/b2g" title="irc://irc.mozilla.org/b2g">#b2g</a> を訪れて、助けを求めるべき時です。</p>

<h3 id="構成設定を削除する">構成設定を削除する</h3>

<p>時々、エミュレートされたデバイス上にある無効な構成設定が、不具合の原因になります。これを修正するために、以下のやり方で IndexedDB データベースを削除することができます :</p>

<ol>
 <li><a href="/ja/docs/Mozilla/Boot_to_Gecko/Using_the_B2G_emulators#adb_.E3.82.B5.E3.83.BC.E3.83.90.E3.81.8C.E5.8B.95.E4.BD.9C.E3.81.97.E3.81.A6.E3.81.84.E3.82.8B.E3.81.8B.E7.A2.BA.E8.AA.8D.E3.81.99.E3.82.8B">adb サーバが動作しているか確認する</a> を参照して、adb が動作していることを確認します</li>
 <li>エミュレータを起動します</li>
 <li>ホストコンピュータのターミナルから、エミュレータのビルドディレクトリのルートで、次のように入力します : <code>out/host/&lt;platform&gt;/bin/adb -e shell</code> ; Mac の場合は、<code>out/host/darwin-x86/bin/adb -e shell</code> です</li>
 <li>これで adb shell にいるはずですので、エミュレートされたデバイス上でシェルコマンドを実行可能になります。デバイス上で B2G を止めましょう : <code>stop b2g</code></li>
 <li>IndexedDB データベースを削除します : <code>rm -rf /data/local/indexedDB</code></li>
 <li>エミュレートされたデバイス上の B2G を再起動します : <code>start b2g</code></li>
</ol>

<p>この点で、できれば、あなたが Gaia インターフェースまで戻って解決するといいのですが。</p>

<h2 id="エミュレータが開始してもmozilla_technologyのスプラッシュスクリーンが出る前後で画面が真っ黒な場合">エミュレータが開始しても"mozilla technology"のスプラッシュスクリーンが出る前後で画面が真っ黒な場合</h2>

<p>これが起こる場合、エミュレータを動作させている機械のドライバのバグの可能性があります。Linuxのオープンソースの<span class="st"><em> nouveau </em></span>ドライバーで観測されます。最も簡単な方法は、機械のドライバーを変更することです。<span class="st"><em> nouveau </em>ドライバーの場合は代わりにプロプライエタリな(Ubuntuの<span class="st">"追加の"</span>) ドライバーをインストールします。</span>オンボードのIntelグラフィックのチップセットの場合、Linuxデフォルトのオープンソースドライバーは、エミュレータの'eglMakeCurrent failed'エラーを起こす事があり、どうやらOpenGLバージョン 2.0未満がGPUエミュレーション用に必要なようです。解決法はGPUをアクティベート解除することで、 <code>run-emulator.sh</code> スクリプトを編集するとできます (これは遅くなります).</p>

<h2 id="エミュレータを構成する">エミュレータを構成する</h2>

<p>エミュレートしたいデバイスにより近づけるために、エミュレータを調整する複数の変更可能なオプションがあります。このセクションでは、そのやり方に関するいくつかの基本的な情報を提供します。エミュレータの設定は <code>run-emulator.sh</code> スクリプトを（理想的にはコピーして）編集することで調整できます。ここに記述されているパラメータは、非常に有用なパラメータの極一部にすぎません。その他のパラメータの詳細情報は <a class="external" href="http://www.qemu.org/" title="http://www.qemu.org/">qemu のサイトで調べて</a>みてください。</p>

<div class="note"><strong>ヒント :</strong> シミュレートしたいデバイス毎に <code>run-emulator.sh</code> のコピーを 1 つ作成してください。異なる構成で起動するのが楽になります。</div>

<h3 id="スキンを変更する">スキンを変更する</h3>

<p>デフォルトでは、エミュレータは HVGA モード、つまり half-VGA 、320×480 ピクセルで起動します。この値は、エミュレータが起動する際に与えられる <code>-skin</code> パラメータで指定されます。<code>run-emulator.sh</code> スクリプトを（理想的にはコピーして）編集することで、異なるディスプレイモードに切り替えることができます。提供されているスキンは以下の通りです :</p>

<ul>
 <li>HVGA (320x480)</li>
 <li>QVGA (240x320)</li>
 <li>WQVGA (240x400)</li>
 <li>WQVGA432 (240x432)</li>
 <li>WSVGA (1024x600)</li>
 <li>WVGA800 (480x800)</li>
 <li>WVGA854 (480x854)</li>
 <li>WXGA720 (1280x720)</li>
 <li>WXGA800 (1280x800)</li>
</ul>

<p>スキンは、<code>B2G/development/tools/emulator/skins</code> ディレクトリにあります。特筆すべきなのは、スキン用の書式がかなりシンプルになっていることです。内容を確認してみると、様々なユーザインターフェースオブジェクト用の PNG ファイルや、インターフェースと画面領域のレイアウトを説明する <code>layout</code> という名前のテキストファイルがたくさん入っている、シンプルなフォルダであることがわかるでしょう。カスタムスキンが必要なら、作成するのは非常に簡単です。</p>

<h3 id="メモリサイズを変更する">メモリサイズを変更する</h3>

<p>構成変更したい、もしくは変更する必要のある設定の、もう一つのオプションは、デバイスメモリサイズです。デフォルトでは 512MB ですが、エミュレートしているデバイスのメモリがもっと多いか少ない場合、取り組みたい基本デバイスでアプリを確実に動作させるには、設定が一致するよう調整するのは重要でしょう。これを行うには <code>-memory</code> パラメータの値を、必要とするサイズに MB 単位で変更してください。デフォルトの 512MB 以外では、256MB や 1024MB が、一番試してみたくなりそうな値です。</p>

<p>デバイス用にエミュレートされた記憶容量を変更するには（これは、携帯電話のフラ ッシュストレージや、コンピュータのハードディスクのような、ローカルデータ用記憶域 のことです）<code>-partition-size</code> パラメータを変更してください。デフォルトは 512MB ですが、テストを要するデバイスの種類をシミュレートするために、必要となるどのようなサイズでも MB 単位で指定可能です。</p>

<h3 id="ネットワーク接続">ネットワーク接続</h3>

<p>何らかの理由でエミュレータがインターネットに接続できなかった場合、以下のコマ ンドをコマンドラインから実行してください :</p>

<pre>adb shell setprop net.dns1 10.0.2.3</pre>

<p>emulator-jb または emulator-kk を実行している場合、DNSサーバの設定コマンドは異なります。下記のコマンドを実行します：</p>

<pre>adb shell ndc resolver setdefaultif eth0
adb shell ndc resolver setifdns eth0 10.0.0.0 10.0.2.3</pre>
