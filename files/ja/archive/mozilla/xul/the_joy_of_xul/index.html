---
title: XUL の利点
slug: Archive/Mozilla/XUL/The_Joy_of_XUL
tags:
  - XUL
translation_of: Archive/Mozilla/XUL/The_Joy_of_XUL
---
<p> </p>
<p>このページは、主として XUL についての理解を深めたい、 あるいは Mozilla のプラットフォームが XUL を利用して構築されている理由について知りたいと考えている アプリケーション開発担当者や開発マネージャーを読者に想定しています。</p>
<h3 id="はじめに">はじめに</h3>
<p><a href="/ja/XUL" title="ja/XUL">XUL</a> (ズールと発音します) は、Mozilla が持っている XML ベースの ユーザーインターフェイス記述言語で、 これにより、高機能でクロスプラットフォーム対応のアプリケーションを作成することが可能になります。 このとき、アプリケーションとしては、インターネットに接続して動作するものでも、切り離されていても動作するものでも作成できます。 さらに、作成されたアプリケーションに対して、テキストやグラフィクス、レイアウトの変更といったカスタマイズを行うことが容易ですので、簡単に<span style="border-bottom: 1px dashed green;" title="branded">商標を設定</span>を行ったり、複数の市場向けにローカライズを行うことが可能です。 また、Web 関連のエンジニアで、すでに Dynamic HTML (<a href="/ja/DHTML" title="ja/DHTML">DHTML</a>) に慣れているのであれば、XUL の習得は短期間で可能ですので、すぐにアプリケーションの作成に着手できるはずです。</p>
<p>このドキュメントでは、XUL と Mozilla が持っているクロスプラットフォームのアプリケーションを作成する技術が、アプリケーション開発者を惹きつけている理由のいくつかについて説明します。 また、この調査では Mozilla が XUL を開発する動機と、Mozilla のプラットフォームが XUL を利用して構築されている理由についても十分な説明を行います。 以下では、まず XUL の主な機能と利点を調査し、続いて Mozilla がサポートする技術を検証していきます。 最後に、ミニケーススダデイとして、XUL によるカレンダーアプリケーションを作成し、Mozilla を使ってアプリケーションを作成する利点を補足します。</p>
<h3 id="主な機能と利点">主な機能と利点</h3>
<table class="standard-table"> <tbody> <tr> <td>強力なウィジェットベースのマークアップ言語</td> <td>XUL の<span style="border-bottom: 1px dashed green;" title="goal">目的</span>はクロスプラットフォームのアプリケーションを構築することにあり、 これは Web ページの作成を目的とする DHTML との明確な相違点になっています。 つまり、DHTML が、ページの記述のために見出しレベルやハイパーテキストリンクといった要素を中心に提供しているのに対して、 XUL では、主にウィンドウを作成するためのラベルやボタンといったアプリケーション<span style="border-bottom: 1px dashed green;" title="artifact">製品</span>の作成を指向した要素を提供しています。 <p>実際、数多くの開発者が、DHTML による Web アプリケーションの中で、 同様のことを実現するべく多大な努力を投じていますが、 その場合は複雑さに起因するコストや性能の問題、標準化の欠如といった問題があります。</p> </td> </tr> <tr> <td>既存の標準に準拠</td> <td>XUL は W3C 標準の XML 1.0 に基づいた XML 応用言語です。 また、XUL で記述されたアプリケーションは、W3C で追加された標準技術、 特に「HTML4.0」「Cascading Style Sheets (CSS) 1 と 2」 「Document Object Model (DOM) レベル 1 と 2」 「JavaScript 1.5, EMCA-262 Edition 3 (ECMAScript)を含む」 「XML 1.0」に基づいています。 <p>さらに mozilla.org では、次のステップとして eXtensible Binding Language (XBL) の W3C による標準化を推進しています (下記の「XUL をサポートする技術」参照)。</p> </td> </tr> <tr> <td>プラットフォーム移植性</td> <td>XUL は、HTML と同様に <span style="border-bottom: 1px dashed green;" title="platform-neutral">プラットフォーム中立</span>に設計されていますので、 作成したアプリケーションは、Mozilla が動作する OS であれば簡単に移植することができます。 現在 Mozilla がサポートしているプラットフォームの範囲の広さを考慮すれば、 このプラットフォーム中立な設計が、XUL のアプリケーションを構築する技術という面での最も重要な特徴のひとつであるといえるかもしれません。 <p>XUL の持つ、ユーザーインターフェイスのコンポーネントを<span style="border-bottom: 1px dashed green;" title="abstraction">抽象化</span>する機能によって、 「write-once, run-anywhere (一度記述したコードは何処でも動く)」の約束が実現されます。 実際、Mozilla スイートのすべてのコア・アプリケーション (ブラウザ、メッセンジャー、アドレス帳など) のユーザーインターフェイスは、XUL によって記述されており、 これは、単一のコードベースで、Mozilla のすべてのプラットフォームをサポートします。</p> </td> </tr> <tr> <td>プレゼンテーションとアプリケーションロジックの分離</td> <td>既存の多くのアプリケーションが持っている大きな欠点のひとつに、 ユーザーインターフェイスの要素とクライアントアプリケーションのロジックとが強く結合されていることがあります。 これら 2 つの部分を開発するためには、それぞれに対応するスキルが必要であるため、 多くの場合は、そのために別の担当者を割り当てますが、 そのことが、開発チームの環境に大きな問題を引き起こす要因になっています。 <p>XUL では、クライアントアプリケーションを コンテント (<span style="color: green;">content</span>)、スキン (<span style="color: green;">skin</span>)、ロケール (<span style="color: green;">locale</span>) の 3 つのパートに明確に分離して扱う方法を提供しています。 コンテントパートは、アプリケーションの定義と<span style="border-bottom: 1px dashed green;" title="programmatic">プログラム的な</span>ロジックであり、XUL、XBL、JavaScript により構成されます。 スキンパートは、プレゼンテーション (どのように表示するか) に関する情報で、CSS と画像により構成されます。 最後のロケールパートは、各地の言語固有のテキストラベルを含んでいて、DTD と .properties ファイルで定義される<span style="border-bottom: 1px dashed green;" title="string bundle">文字列バンドル</span>により構成されます。 このため、XUL アプリケーションのレイアウトと外観は、アプリケーションの定義とロジックから独立して変更することが可能です。 さらに、アプリケーションは、アプリケーションのロジックや外観に依存することなく、異なる言語や地域用にローカライズすることが可能です。</p> <p>この分離度によって XUL のアプリケーションは、プログラマーの保守を容易にするとともに、デザイナーと翻訳者も容易にカスタマイズができるようになっています。 また、ワークフローの観点からも、これらの相互に依存するアクティビティの調整を、HTML ベースの Web アプリケーションの場合よりも簡単に行うことができるため、 システム全体の安定性や品質に与える影響を小さくできます。</p> </td> </tr> <tr> <td>カスタマイズ、ローカライズ、<span style="border-bottom: 1px dashed green;" title="branding">商標設定</span>が容易</td> <td>XUL が、アプリケーションロジックと表示、言語テキストの分離を提供することによる、もうひとつ非常に現実的な利点として、異なる顧客や、ユーザーグループのためのカスタマイズが容易なことがあります。 <p>つまり、開発者はアプリケーションについて 1 つの<span style="border-bottom: 1px dashed green;" title="primary">基本となる</span>コードベースを保守するだけで良く、各顧客向けには異なるスキンを提供することでロゴや商標のカスタマイズが可能になります。 また、英語でユーザーインターフェイスを記述して、配備されたアプリケーションについて、同じ顧客用にフランス語に翻訳したものを作成することが可能です。 この場合は、変更範囲が広く、(すべてではなくても) ほとんどアプリケーション全体に影響するにもかかわらず、 翻訳に関する情報についても互いに切り離されているため、すべてのカスタム版が共有するコアとなる XUL 定義とアプリケーションロジックに適用するだけで翻訳を有効にすることが可能になります。</p> </td> </tr> </tbody>
</table>
<h3 id="XUL_をサポートする技術">XUL をサポートする技術</h3>
<p>Mozilla では、上記以外にもクロスプラットフォームの Web アプリケーションを構築するために、XUL を補完するいくつかの技術を導入しています。</p>
<table class="standard-table"> <tbody> <tr> <td><a href="/ja/XBL" title="ja/XBL">XBL</a></td> <td>eXtensible Bindings Language (XBL) はマークアップ言語のひとつで、これにより専用の新しい要素、または XUL ウィジェット用の「バインディング」を定義できます。 XBL により、開発者は XUL ウィジェットのための新しいコンテントの定義、XUL ウィジェットへの付加的なイベントハンドラの追加、新しいインターフェイスのプロパティとメソッドの追加が可能です。 すなわち、XBL は開発者に対して、既存のタグをカスタマイズして独自の新しいタグを作成することで、XUL を拡張する手段を提供します。 <p>XBL を使用すれば、開発者は簡単にカスタムユーザーインターフェイスウィジェット、例えばプログレスメーターやファンシーなポップアップメニュー、あるいはツールバーや検索フォームといったものを構築できます。 これらのカスタムコンポーネントは、カスタムタグと関連する属性を指定することで、XUL のアプリケーションの中から使用可能になります。</p> </td> </tr> <tr> <td><a href="/ja/XUL_Overlays" title="ja/XUL_Overlays">オーバーレイ</a></td> <td>オーバーレイ (<span style="color: green;">Overlay</span>) は <abbr title="ユーザーインターフェイス">UI</abbr> に追加するコンテントを記述するために使用する XUL ファイルのことです。 <p>これは、付加的なコンポーネントの UI を追加するための汎用的なメカニズムで、 XUL ファイルの一部分だけを、UI 全体を再提供することなしにオーバライドしたり、既存の UI の特定の部分を追加コンポーネントから再利用したりすることを可能にしています。</p> <p>オーバーレイは、既存のアプリケーションのカスタマイズと拡張を行うための強力なメカニズムで、 オーバーレイにより、全く異なる 2 つのアプリケーションを関連して動作させることが可能になります。 オーバーレイは、アプリケーションの定義の中から明示的に読み込みを指定することができるため、 他の言語の include ファイルに該当するものであるという見方をすることが可能です。 また、それだけではなく、オーバーレイはアプリケーションの外部からも指定できるため、 デザイナーは元のソースには手を加えることなくオーバーレイを重ね合わせることが可能です。</p> <p>実用的な面では、オーバーレイによって、開発者が所定のアプリケーションについて 1 つのコードストリームだけを維持しながら、 各顧客のために、カスタムブランドの設定を適用したり、全く別のコードベースから専用の機能を含めることを可能にしています。 このことは、長期にわたる保守を容易にするため、コスト削減のための包括的なソリューションの導入に利用できます。</p> <p>また、オーバーレイは、Mozilla にプロプリエタリな状態を保ったまま機能を追加したいと考えている開発者の意図を実現するためにも利用できます。 Netscape Public License (NPL) と Mozilla Public License (MPL) では、 元の<span style="border-bottom: 1px dashed green;" title="work">成果物</span> (Mozilla から供給されたソースコードファイル) を変更する開発者は、顧客に対して変更に関するソースコードをリリースすることを求めていますが、 オーバーレイを利用すれば、元の Mozilla のオープンなソースコードを一切侵すことなく、プロプリエタリな変更を加えることが可能になります。</p> </td> </tr> <tr> <td><a href="/ja/XPCOM" title="ja/XPCOM">XPCOM</a>/<a href="/ja/XPConnect" title="ja/XPConnect">XPConnect</a></td> <td>XPCOM と XPConnect は外部ライブラリと XUL アプリケーションとを統合することを可能にする補完的技術です。 <p>XPCOM は、「Cross Platform Component Object Model」から取られており、クロスプラットフォームな、モジュラーソフトウェアを作成するためのフレームワークです。 XPCOM コンポーネントは、C と C++、JavaScript で作成することが可能で、C と C++、JavaScript、<a href="/ja/Python" title="ja/Python">Python</a>、Java、Perl、Ruby から利用することが可能です。</p> <p>XPConnect は、XPCOM と JavaScript 間で簡単に相互動作を行うことを可能にする技術です。 XPConnect は、JavaScript のオブジェクトを XPCOM のオブジェクトから透過的にアクセスして、操作することを可能にしています。 また、同様に JavaScript のオブジェクトに、XPCOM オブジェクトを呼び出すための XPCOM コンポーネントのインターフェイスを割り当てることも可能です。</p> <p>XPCOM と XPConnect をあわせて使用することで、開発者は、コンパイラ言語 (C/C++) の持つ強力な処理能力や、土台となっているオペレーテイングシステムへのアクセスを必要とするような XUL アプリケーションを作成できます。</p> </td> </tr> <tr> <td><a href="/ja/XPInstall" title="ja/XPInstall">XPInstall</a></td> <td>XPInstall は、Mozilla の持つクロスプラットフォーム対応のインストール機構で、 XUL アプリケーションコンポーネントのパッケージ化と、 インストールのために、Mozilla がダウンロードして実行可能なインストールスクリプトについての標準的な方法を提供しています。 <p>XPInstall によって、利用者は、インターネットか企業のイントラネット上のサーバから、 新しい XUL アプリケーションを難なくインストールすることが可能になります。 新しいアプリケーションをインストールするために利用者が必要な作業は、 Web ページや E メール上のハイパーリンクをクリックし、表示される Mozilla インストールダイアログに新パッケージを受け入れることを指示するだけです。</p> </td> </tr> </tbody>
</table>
<p><span>todo: describe cool toolkit and xul runner features</span></p>
<h3 id="ケース・スタディ：_Mozilla_カレンダーアプリケーション">ケース・スタディ： Mozilla カレンダーアプリケーション</h3>
<p>このミニケーススタディは、OEone Corporation (<a class=" external" href="http://www.oeone.com">http://www.oeone.com</a>) で、自社の Calendar アプリケーションを Mozilla プロダクトのコアに統合したときの方法について記述しています。 この Calendar アプリケーションは、 XUL によるフロントエンドと XPCOM コンポーネントから構成されています。 このコンポーネントでは、C 言語で記述されたネイティブ・ライブラリである libical を<span style="border-bottom: 1px dashed green;" title="leverage">駆動</span>して、日付操作と Calendar データの保管を行います。 この Calendar は、最初 Linux 専用に開発しましたが、わずか一週間で Macintosh と Windows 両方に移植することに成功しています。</p>
<p><em>XUL では<span style="border-bottom: 1px dashed green;" title="rich set of">多機能な</span> UI コンポーネント群を提供しています。</em> このため、Calendar のユーザーインターフェイスは、全面的に XUL と JavaScript、CSS で記述されています。 このことは、このアプリケーション構築フレームワークの能力と柔軟性を示す証左といえます。 Calendar では、ボックスやグリッド、スタック (日、週、月の表示の合成に使用) といった簡単なコンポーネントを使用しています。 なお、Calendar の最初の実装では、XBL を利用していませんが、 これは、参加した開発者にその補完的な技術 (XBL) についての経験がなかったことによります。 しかし、将来の Calendar の計画では、これらの UI コンポーネントの多くを XBL ウィジェットに変換することで、実装をより簡単にする予定になっています。</p>
<p><em>XPCOM/XPConnect は、ネイティブコードとの統合を可能にしています。</em> 完全な機能を持ったオープンソースのカレンダーライブラリである libical (<a class=" external" href="http://www.softwarestudio.org/libical/">http://www.softwarestudio.org/libical/</a>) を、Calendar プロジェクトでは採用することにしました。 libical は IETF が規定する「iCalendar Calendaring and Scheduling protocols」のオープンソースの実装になります (<a class="external" href="http://tools.ietf.org/html/rfc2445" title="http://tools.ietf.org/html/rfc2445">RFC 2445</a>、2446、2447)。 libical は iCal コンポーネントの<span style="border-bottom: 1px dashed green;" title="parse">解析</span>と、コンポーネントプロパティやパラメータ、サブコンポーネントを操作するための C 言語による API を提供しています。 このライブラリは、最初は XPCOM のインターフェイスに適合させるためのラッパーを作成することで統合されましたが、 その後パーフォマンスの向上のために、アプリケーションロジックの大部分も JavaScript から XPCOM コンポーネントに移動しました。</p>
<p><em>プレゼンテーションをロジックから分離することで、アプリケーションが変更に強くなります。</em> 最初の UI の実装では、月単位と週単位の表示を描画するためにグラフィックを多用していました。 その後、開発者の XUL に対する理解が深まったため、基本的なコンポーネントの実装の完成度が上がり、UI の構造を簡潔にするためのより良い方法を見出すことができました。 これによって、画面の描画性能は向上し、アプリケーションに必要とされるメモリとディスクの使用領域は減少しました。 実際、月と週の表示用の UI を、実質的にアプリケーションのロジックは変更せずに書き換えることができました。</p>
<p><em>XUL アプリケーションを他のプラットフォームへ移植することは簡単です。</em> この Calendar は、Linux アプリケーションとして始まり、そのときは他のプラットフォームへの移植は考慮されていませんでした。 しかし、その後、最初の開発者 (OEone Corporation) が Mozilla プロジェクトへソースコードを<span style="border-bottom: 1px dashed green;" title="contribute">提供</span>したときに、Calendar を Windows と Macintosh プラットフォームに移植する必要がありました。 XUL アプリケーションの UI は、2 つの新たなプラットフォームでも、ほどんど変更することなく動作したため、移植の苦労はありませんでした。 同様に、 UI のコードも、JavaScript で記述されているため、利用者との<span style="border-bottom: 1px dashed green;" title="interaction">対話</span>を制御するロジックについても苦労なく動作させることができました。 しかしながら、libical ライブラリは C 言語で書かれているため、このコンポーネントを他のプラットフォームに移植するためには、より多大な努力を必要としました。</p>
<p>幸運なことに、Macintosh では既に利用可能な libical ライブラリの実装が存在したため、 XPCOM が持つクロスプラットフォームを指向する特質も手伝って、 Macintosh の カレンダーの実装は数日のうちに動作するようになりました。 しかし、当時は Win32 で利用可能な実装が無かったため、開発者は libical を Windows に移植する苦労も引き受けなければなりませんでした。 一週間程度で、この件も完了し、Mozilla は Linux、Macintosh、Windows という主要な 3 つのプラットフォームすべてで稼動するカレンダーを備えることができました。</p>
<p><em>XPInstall は開発者にも利用者にも簡単です。</em> この Calendar は Mozilla 1.0 のリリースに合せて配布する予定ではないため、 通常のナイトリーおよびマイルストーンビルドのリリースには、標準コンポーネントとして含まれていません。 このため、Calendar を自分自身で構築できるのは、 Mozilla をコンパイルするために必要なソフトウェアと知識を持ち、オプションの環境変数を適切に設定できるような開発者だけということになります。 しかし、Calendar を試したいと思っている多くの Mozilla 利用者では、この贅沢な要求を満たすことはできません。 XPInstall を使用することで、開発者は容易にパッケージバージョンの Calendar、 すなわちリンクをクリックするだけでインターネット経由で直接インストール可能な Calendar を作成することができました。</p>
<h3 id="おわりに">おわりに</h3>
<p>Mozilla を XUL に着目して見ると、ネイティブなデスクトップのアプリケーションとして十分に高機能なユーザーインターフェイスと、エンドユーザーのエクスペリエンスを備えたクロスプラットフォームのアプリケーションを開発するために欠くことのできない技術をもたらしています。 W3C の標準技術を使用して Web アプリケーションを構築した経験を持つデザイナーは、 ブラウザでの経験を直接デスクトップで活用することが可能です。</p>
<p>利用者がいくつかの異なる種類のデスクトップを利用する状況で、 Web がアプリケーションを提供する標準的な方法になる以前には、 このためにクロスプラットフォームなクライアントサーバーツールが利用されていました。 しかしながら、この方法では常にプロプリエタリな製品に依存するため、 開発者の単価が高コストになり、実行時間単位でライセンス料が発生するため、 ベンダーに強く束縛された低い立場に甘んじるしかありませんでした。 Mozilla は、オープンソースのライセンスだけで、これらのクロスプラットフォームなツールとほとんど同等の価値をもたらします。</p>
<p>急速に成熟しつつあるクロスプラットフォーム技術として、 XUL は、Java J2EE や Microsoft .Net といった、分散オブジェクトをネットワークからアクセスすることを可能にすることに焦点をあてている技術が持つ<span style="border-bottom: 1px dashed green;" title="interesting void">興味深い隙間</span>を埋めることが可能です。 こういった動的なアプリケーションロジックは、UI のプレゼンテーション層が 「<span style="border-bottom: 1px dashed green;" title="standards-based">標準に準拠</span>」「<span style="border-bottom: 1px dashed green;" title="scriptable">スクリプトとして記述可能</span>」「<span style="border-bottom: 1px dashed green;" title="extensible">拡張可能</span>」「インターネットを通して配布か同等のことが可能」という特徴を持つことによって、多大な恩恵を受けることになるからです。</p>
<p>XUL にとって、デスクトップのアプリケーションとインターネットブラウザ上のアプリケーションの境界は曖昧です。 これは、XUL がこれらの両方の世界にしっかりと定着していることに起因しています。 既存の Web アプリケーションにも、XUL に移植されることで、恩恵をうけるものもあるでしょう。 そうすることで、高度な UI 機能を備えることができ、サポートされるの全てのプラットフォームにわたって提供される仕様の一貫した実装と、共有ライブラリやローカルファイルシステムといったネイティブなリソースへのアクセスが利用可能になります。</p>
<p>もし、あなたが、 「既存のウェブ・アプリケーションをデスクトップへ移植する必要がある」 「アプリケーションを複数のプラットフォームへ簡単に移植可能にする技術を探している」 「自身が所有するクールな機能をブラウザに統合することを望んでいる」 のどれかに該当するのであれば、XUL は熟慮に値する技術であるといえるはずです。</p>
<h3 id="参照資料">参照資料</h3>
<ol> <li>MDC の <a href="/ja/XUL" title="ja/XUL">XUL</a> ドキュメント。<a href="/ja/XUL_Tutorial" title="ja/XUL_Tutorial">XUL チュートリアル</a> と <a href="/ja/XUL_Reference" title="ja/XUL_Reference">XUL リファレンス</a> が含まれる</li> <li><a href="/ja/XUL_Overlays" title="ja/XUL_Overlays">XUL オーバーレイ</a></li> <li><a href="/ja/XBL" title="ja/XBL">XBL</a> ドキュメント: <a href="/ja/XUL_Tutorial/Introduction_to_XBL" title="ja/XUL_Tutorial/Introduction_to_XBL">XBL 入門</a>, <a href="/ja/XBL/XBL_1.0_Reference" title="ja/XBL/XBL_1.0_Reference">XBL リファレンス</a></li> <li><a href="/ja/XPCOM" title="ja/XPCOM">XPCOM</a> ドキュメント</li> <li><a href="/ja/XPConnect" title="ja/XPConnect">XPConnect</a> (<span style="border-bottom: 1px dashed green;" title="Scriptable">スクリプトから利用可能な</span>コンポーネント) ドキュメント。<a class=" external" href="http://www.mozilla.org/scriptable/">http://www.mozilla.org/scriptable/</a> も参照</li> <li><a href="/ja/Extensions" title="ja/Extensions">拡張機能</a> ドキュメント。 <a href="/ja/Building_an_Extension" title="ja/Building_an_Extension">拡張機能の構築</a> 入門のためのチュートリアルが含まれる</li> <li><a class="external" href="http://www.mozilla.org/projects/calendar/">Mozilla Calendar プロジェクトのページ</a></li>
</ol>
<div class="originaldocinfo"> <h3 id="Original_Document_Information">Original Document Information</h3> <ul> <li>Author: Peter Bojanic</li> </ul>
</div>
<p> </p>
