---
title: Event Handlers
slug: Archive/Mozilla/XBL/XBL_1.0_Reference/Event_Handlers
tags:
  - XBL
translation_of: Archive/Mozilla/XBL/XBL_1.0_Reference/Event_Handlers
---
<p>
</p><p>イベントハンドラは <code>handler</code> 要素を使って定義されます。ハンドラは <code>event</code> 属性を使ってどのイベントのために待機するかを定義します。イベントがハンドラが結びついたオブジェクトへフローする (流れる) ときや、そのイベントがハンドラに定義された基準のすべてに一致したとすると、実行されるスクリプトをこのハンドラは含んでいます。
</p><p>もっとも基本となるハンドラは待機するイベントとハンドラが発行されたとき行うアクションを定義します。この動作は <code>action</code> 属性を使うか、<code>handler</code> 要素の子供としてスクリプトを定義することによって定義されます。両方が定義されると、<code>action</code> 属性が優先されます。
</p><p>デフォルトでは、ハンドラはバウンド要素に結びつけられます。そしてハンドラは通知イベントとして登録されます。これは
</p>
<pre>&lt;handler event="click" action="foo()"/&gt;
</pre>
<p>上記の定義が、バウンド要素上で定義された <code>onclick="foo()"</code> と類似していることを意味します。
</p><p>イベントハンドラはウィンドウに、バウンドドキュメントに、<code>attachto</code> 属性を使ったバウンド要素に結びつけることが出来ます。バインディングはこの属性を使ってバウンドドキュメント上の <code>load</code> のようなイベントを待機するためのハンドラを登録することができます。その属性の値は、<code>window</code>、<code>document</code>、<code>element</code> といったものです。
</p><p><code>phase</code> 属性はハンドラが登録されるイベントフローのフェーズ (段階) を定義します。デフォルトの値は <code>bubbling</code> で、そのイベントハンドラが bubbling (通知される) なフェーズで発行されることを意味します。その他の値として取りうるものに <code>target</code> があり、そのハンドラは <code>event.target</code> がハンドラが結びつけられた対象と同じときに発行されることを意味します。また、<code>capturing</code> もあり、イベントフローの capturing (捕捉する) フェーズで発行されるべきハンドラであることを示します。
</p><p>XBL イベントハンドラはいつでも、イベントフローの中の同じ位置にある他のすべてのイベントハンドラの後、一番最後に発行されます。XBL ハンドラは通常、ウィジェットへのデフォルトのアクションを構成するため、バウンドドキュメント中で XBL ハンドラによって行われるデフォルトアクションを潜在的に抑制するイベントを書くことができます。
</p><p>XBL 継承のつながりの内部で、イベントハンドラはいつでも派生したバインディングで呼び出され、そしてつながりの基底バインディングで呼び出されていきます。そして派生したハンドラはその基底バインディングのハンドラにイベントが流れるのを防ぐことができます。
</p><p>マウスハンドラとキーハンドラは XBL でサポートされるある種の追加のプロパティを持っています。追加の属性はイベントハンドラ上の「filter」を強制するために使うことが出来ます。filter が強制されると、追加の条件はイベントハンドラが発生する前に満たされる必要があります。
</p><p>mouse イベントと key イベントの両方で、修飾キーは、<code>modifiers</code> 属性を使って特定できます。この属性は、ハンドラが実行する順番で key もしくは mousee イベントが発生した時に押下されている変化したキーのカンマ区切りのリストです。リストでよくあるキーの例として、<code>shift</code>、<code>control</code> などが挙げられます。
</p><p>それに加え、mouse イベントは <code>button</code> や <code>clickcount</code> を定義できます。これにより、XBL 著者は、これらの場合を区別するために同じハンドラ上にスクリプトを書くことなく、右クリック、左ダブルクリックなどのためのハンドラを簡単に定義することができます。
</p><p>key イベントは、<code>charcode</code> 属性と <code>keycode</code> 属性をサポートしています。セットされれば、<code>event</code> オブジェクトの対応するフィールドは発生したイベントに一致しなくてはなりません。
</p><p>[編集者メモ: エラーハンドリングについても章を設けるべきか？多分そうだろう。]
</p>
