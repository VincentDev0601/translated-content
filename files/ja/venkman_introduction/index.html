---
title: Venkman Introduction
slug: Venkman_Introduction
tags:
  - Tools
  - Venkman
translation_of: Archive/Mozilla/Venkman/Introduction
---
<p>Firefox、Mozilla Suite、Netscape 7.x など、多くの Mozilla ベースの製品を使用する Web 開発者は新たに強力なツールが利用できます。しばらく前から「Venkman」と呼ばれる JavaScript デバッガが Mozilla ブラウザ、Web コミュニティ、スクリプト開発者に利用されています。この記事では JavaScript デバッガを Web アプリケーションや Web ページスクリプティングで使用するための概要を説明すると共に、簡単な実践例を用意しています。この導入は Venkman と JavaScript デバッグについての一連の記事の第一弾です。例えあなたが既に Venkman を使用していても、ここに書かれた機能、処理、手法を知ることで、Web 開発やデバッグに一層の自信が持てるようになるはずです。</p>

<p>Venkman は画面表示とコンソール双方で操作できるデバッガです。ブレークポイント管理、コールスタック監視、変数/オブジェクト監視といった機能は画面上からとコンソールコマンドから
 <i>どちらからでも</i>
 利用でき、慣れている方を使って作業できます。対話コンソールでは任意の JavaScript コードを実行させることもできます。 Venkman のキーボードショートカットは既存のビジュアルデバッグ環境に合わせており、gdb のユーザであれば Venkman の <code>break</code>, <code>step</code>, <code>next</code>, <code>finish</code>, <code>frame</code> および <code>where</code> コマンドが自然と使えるようになっています。</p>

<p>この JavaScript デバッガは Windows 環境でのビジュアル相互開発環境や他の大規模 Web 開発ツールよりも優れており、Mac OS や Unix を含めて他のプラットフォームにおいては、ビジュアルデバッグ環境でこれほどまでに柔軟、包括的で強力なものは他にありません。</p>

<div class="note">
<p>訳注：この和訳記事は Mozilla に訳者 dynamis が作成している日本語版 Venkman をインストールした環境を使って書かれており、文中の訳語や和訳と同時に撮り直したスクリーンショットなどはすべてそれに応じたものとなっております。従って、内容的な影響は一切ないものの、細部では原文と異なる所がありますのでご了承ください。<br>
 <span class="comment">最新の日本語版 Venkman やその他 Venkman に関する日本語情報については <a class="external" href="http://firehacks.org/venkman/" title="http://firehacks.org/venkman/">Venkman Localization</a> をご覧ください。</span></p>
</div>

<h2 id=".E3.83.87.E3.83.90.E3.83.83.E3.82.AC.E3.81.AE.E8.B5.B7.E5.8B.95" name=".E3.83.87.E3.83.90.E3.83.83.E3.82.AC.E3.81.AE.E8.B5.B7.E5.8B.95">デバッガの起動</h2>

<p>JavaScript デバッガは Mozilla 1.x では自動的にプリインストールされますが、Firefox や他の Gecko ベースの製品 (Thunderbird、Netscape 7.x など) では追加インストールする必要があります。とはいっても、XPInstall テクノロジにより、追加のアプリケーションモジュールは単にリンクをクリックするだけで Firefox にインストールできます。</p>

<p>まだ Venkman を用意できていないあるいはアップグレードする場合は <a class="link-https" href="https://addons.mozilla.org/ja/firefox/addon/216">Firefox Add-ons</a> で簡単に最新版を入手できます。インストールは 2 段階になります。まず、デバッガアプリケーションを搭載したいブラウザで <a class="link-https" href="https://addons.mozilla.org/ja/firefox/addon/216">Firefox Add-ons</a> を表示し、最新版の「インストール」リンクをクリックします。ダウンロードが完了後、ブラウザを再起動してください (一部の Windows ユーザはコンピュータの再起動も必要となる場合があります)。これでブラウザのツールメニューの新しい動的生成項目からデバッガを呼び出すことができます。また、デバッガオプションをつけてブラウザを再起動することもできます。</p>

<div class="note">
<p>訳注: Firefox Add-ons で配布されている XPI ファイルは英語版です。<span class="comment">英語ロケールと日本語ロケールの両対応版は別途 <a class="external" href="http://firehacks.org/venkman/#xpi" title="http://firehacks.org/venkman/#xpi">訳者が用意しております</a> のでご利用ください。</span></p>
</div>

<p>Venkman のバージョンを確かめるには、対話セッションビューで <code>/version</code> と入力してください。改良点や最新版に関する詳細は <a class="external" href="http://www.hacksrus.com/~ginda/venkman/">Venkman 開発ページ</a> をご覧ください。</p>

<p>デバッガの起動方法には 2 通りあります。</p>

<ul>
 <li>Firefox の [ツール] メニューから [JavaScript デバッガ] をして起動できます。(Mozilla 1.x や Netscape では [ツール] &gt; [Web 開発] メニューをたどってください)</li>
 <li><code>-venkman</code> コマンドラインオプションを付けてブラウザを起動することができ、その場合、アプリケーションフロントエンドでななく Venkman が最初に起動されます。</li>
</ul>

<p>(Venkman は起動時に「起動回数記録 (ローカル: X、グローバル: YYY)」といった利用状況を表示することに注目してください。このデータはアプリケーション内蔵のカウンタによるものであり、このカウンタとに関してより詳しくは Venkman FAQ の <a class="external" href="http://www.hacksrus.com/~ginda/venkman/faq/venkman-faq.html#2.2">項目 2.2</a> を参照してください。)</p>

<p><img align="none" alt="図 1 JavaScript デバッガ"></p>

<p>Venkman の初回起動時 <span style="color: darkgreen; background: #ef9;">【訳注: スクリーンショットでは 64 回目ですが】</span> には基本的なビューが上のスクリーンショットのように配置されていますが、下の <a href="#ビューのカスタマイズ">ビューのカスタマイズ</a> 節に書いている通りレイアウトや他のビューの表示を好きなように変更することができます。JavaScript エンジンに既に読み込まれているスクリプトが「読み込まれているスクリプトビュー」に表示されます (Venkman でスクリプトがどのように読み込まれアクセスされるかについてより詳しくは <a href="#デバッガへのスクリプト読み込み">デバッガへのスクリプト読み込み</a> を参照してください)。</p>

<p><img align="right" alt="図 2ビューコントロール"></p>

<p>メニューバー、ツールバーおよびすべてのビューは折りたたんだり隠したりでき、デバッグ環境を自由に変更できます。<a href="#ソースコードビュー">ソースコードビュー</a> はスクリプトを選択するまでは空であり、<a href="#対話セッションウィンドウ">対話セッションウィンドウ</a> は簡単なスタートアップ情報を表示して起動します。</p>

<p>各ビューには図 2 にあるように「ラベル」、個別の分離ウィンドウに表示する「分離ボタン」、再度表示しようと思うまで消しておく「閉じるボタン」があります。以下の節ではこれらのビューや全体のインターフェイスの中でのそれらの利用について説明します。</p>

<h2 id="Venkman_のユーザインターフェースに慣れる">Venkman のユーザインターフェースに慣れる</h2>

<h3 id=".E3.83.84.E3.83.BC.E3.83.AB.E3.83.90.E3.83.BC" name=".E3.83.84.E3.83.BC.E3.83.AB.E3.83.90.E3.83.BC">ツールバー</h3>

<p><img align="none" alt="図 3 Venkman ツールバー"></p>

<p>ツールバーはデバッガの最上部に表示されています。ツールバーには停止、継続、ステップオーバー、ステップイン、ステップアウト、プロファイル、整形表示 コマンドのアイコンが並んでいます。これらのコマンドは停止とプロファイルボタン以外は文字通りで誤解することは無いと思います。停止ボタンは
 <i>JavaScript の次の行が実行された時に</i>
 デバッガを停止させるもので、プロファイルボタンはスクリプトの実行時間を記録するのに使用されます。このボタンをクリックしてプロファイルを有効にすると緑のチェックマークがボタンの横に表示され、全関数のプロファイルデータが収集されるようになり、プロファイルメニューの [プロファイルデータを保存...] でそれを保存できます。</p>

<div class="figure float-right">
<p><img alt="Image:venkintro-stop-checked.png"><br>
 <b>図 4</b><br>
 実行待ち状態の停止ボタン</p>
</div>

<p>現在 JavaScript が実行されている時に停止ボタンをクリックすると JavaScript が即座に停止することに注意してください。JavaScript を動かさずに停止ボタンをクリックすると、図 4 のように「...」が表示されます。これはまだ停止するところがないが、次の命令でデバッガが停止することを示しています。</p>

<p>この即時停止モードは JavaScript デバッグの一般的な状況を想定して用意されました。DHTML で動的に要素が変更されるページなど、実行中のスクリプトを検査、デバッグするといった状況です。エラーや例外で停止するコマンドも、デバッグメニューおよびコンソールから使用できます。</p>

<p>停止ボタンの右の継続ボタンを押すと停止モードから抜け出し、各文の実行毎に一時停止することなくスクリプトが通常通り実行されるようになります。</p>

<p>整形表示ボタンは整形表示モードを切り替えます。整形表示モードにすると、ソースビューには選択した関数をデコンパイルしたソーステキストを表示します。これは <code>Function</code> プロトタイプの <code>toSource</code> メソッドで得られるものと同じです。デバッグ中のソースフォーマットが汚い場合でも整形表示機能を使えば、改行とホワイトスペースを適切なところに挿入されて読みやすくなります。</p>

<p>整形表示が有効になっている時にはツールバーのボタン上に緑のチェックマークが表示され、メニューアイテムもチェックされます。</p>

<h3 id=".E8.AA.AD.E3.81.BF.E8.BE.BC.E3.81.BE.E3.82.8C.E3.81.A6.E3.81.84.E3.82.8B.E3.82.B9.E3.82.AF.E3.83.AA.E3.83.97.E3.83.88.E3.83.93.E3.83.A5.E3.83.BC" name=".E8.AA.AD.E3.81.BF.E8.BE.BC.E3.81.BE.E3.82.8C.E3.81.A6.E3.81.84.E3.82.8B.E3.82.B9.E3.82.AF.E3.83.AA.E3.83.97.E3.83.88.E3.83.93.E3.83.A5.E3.83.BC">読み込まれているスクリプトビュー</h3>

<p><img align="none" alt="図 5 読み込まれているスクリプトビュー。現在のファイルと関数"></p>

<p>「読み込まれているスクリプトビュー」は初期状態ではウィンドウの左最上部にあります。ブラウザにファイルが読み込まれるとこのビューに追加され、解放されると取り除かれます。ファイルは種類毎に分けられアルファベット順で並べられます。ファイル名はファイル拡張子を示す色つき文字アイコンの後に表示されます。アイコンとファイルタイプの対応は図 6 をご覧ください。これを書いている現時点ではファイル名の順序やグループ分けの変更はできません。</p>

<div class="figure float-right">
<table class="standard-table">
 <tbody>
  <tr class="header">
   <th>アイコン</th>
   <th>ファイルタイプ</th>
  </tr>
  <tr>
   <td><img alt="J"></td>
   <td>.js</td>
  </tr>
  <tr>
   <td><img alt="H"></td>
   <td>.html, .htm</td>
  </tr>
  <tr>
   <td><img alt="Z"></td>
   <td>.xul</td>
  </tr>
  <tr>
   <td><img alt="X"></td>
   <td>.xml</td>
  </tr>
  <tr>
   <td><img alt="?"></td>
   <td>その他すべて</td>
  </tr>
  <tr>
   <td><img alt="."></td>
   <td>JavaScript 関数</td>
  </tr>
 </tbody>
</table>

<p><b>図 6</b><br>
 スクリプトビューのアイコン</p>
</div>

<p>「特別な」関数名 <code>__toplevel__</code> は実際の関数の一部ではないスクリプトを表すものとして表示されます。ファイル名をクリックするとファイルの最初が表示され、関数名をクリックすると関数の開始部分が表示されます。</p>

<p>このビューの「行番号」列は各関数が始まる行番号を表します。このビューの列選択ボタン(右上にある <img alt="ツリーカラムピッカー"> 部分)により「行数」列も表示できます。この列は個々の関数の長さを表します。行番号および行数列は共にファイル名の行では何も表示されません。</p>

<p>関数がその内部にブレークポイントを持っている場合には、小さな赤い点が関数アイコンおよび親のファイルアイコンの上に表示されます。</p>

<h3 id=".E3.83.AD.E3.83.BC.E3.82.AB.E3.83.AB.E5.A4.89.E6.95.B0.E3.83.93.E3.83.A5.E3.83.BC" name=".E3.83.AD.E3.83.BC.E3.82.AB.E3.83.AB.E5.A4.89.E6.95.B0.E3.83.93.E3.83.A5.E3.83.BC">ローカル変数ビュー</h3>

<p><img align="right" alt="図 7 ローカル変数ビュー"></p>

<p>「ローカル変数ビュー」は初期状態ではウィンドウの左側中央にあります。デバッガが停止するとローカル変数ビューは現在の関数に於ける値を表示します。<code>scope</code> オブジェクトにはすべての引数とローカル変数が納められており、<code>this</code> オブジェクトは <code>this</code> キーワードの値となります。</p>

<div class="figure float-left">
<table class="standard-table">
 <tbody>
  <tr>
   <td><b>e</b></td>
   <td>列挙可能プロパティ</td>
  </tr>
  <tr>
   <td><b>r</b></td>
   <td>変更不可プロパティ</td>
  </tr>
  <tr>
   <td><b>p</b></td>
   <td>永続 (<code>delete</code> 不可)</td>
  </tr>
  <tr>
   <td><b>A</b></td>
   <td>他のプロパティの別名</td>
  </tr>
  <tr>
   <td><b>a</b></td>
   <td>関数の引数</td>
  </tr>
  <tr>
   <td><b>v</b></td>
   <td><code>var</code> 宣言された変数</td>
  </tr>
 </tbody>
</table>

<p><b>図 8. </b> プロパティフラグ</p>
</div>

<p><code>scope</code> および <code>this</code> オブジェクトのプロパティは共に、データ型毎に分けられアルファベット順に並べられます。アイコンとデータ型の対応は図 9 をご覧ください。</p>

<p><code>Object</code> 型のプロパティはその値として中括弧で囲んだコンストラクタ関数名を表示しています。そのプロパティのコンテクストメニューから [コンストラクタを検索] を選択すると、コンストラクタのソースコードを表示できます。[クリエータを検索] コマンドでは、オブジェクトがインスタンスとして生成された場所を知ることができます。初期状態では表示領域を節約するために <code>function</code> 型のプロパティは表示されませんが、関数も表示したければビューのコンテクストメニューで [関数を含める] をチェックしてください。この設定変更は参照したいオブジェクトのツリーを一度閉じてから再度開いた時に反映されます。</p>

<p>太字の灰色フォントで表示されているプロパティはプロトタイプチェーンによって定義されているもので、現に調べているオブジェクト自体のものではなりません。オブジェクトのプロトタイプおよび親のチェーンを調べたければ、ビューのコンテクストメニューで [ECMA プロパティを含める] をチェックしてください。太字の赤いフォントで表示されているプロパティは、Venkman がその値を読み取ろうとした際に例外が発生したものです。例外オブジェクトがそのプロパティの値として表示されます。</p>

<div class="figure float-right">
<table class="standard-table">
 <tbody>
  <tr class="header">
   <th>アイコン</th>
   <th>データ型</th>
   <th>アイコン</th>
   <th>テータ型</th>
  </tr>
  <tr>
   <td><img alt="X"></td>
   <td>無効 (未定義)</td>
   <td><img alt="null"></td>
   <td>Null 値</td>
  </tr>
  <tr>
   <td><img alt="t/f"></td>
   <td>真偽値</td>
   <td><img alt="`'"></td>
   <td>文字列値</td>
  </tr>
  <tr>
   <td><img alt="#"></td>
   <td>整数値</td>
   <td><img alt="##"></td>
   <td>倍精度数値</td>
  </tr>
  <tr>
   <td><img alt="*"></td>
   <td>オブジェクト値</td>
   <td><img alt="f"></td>
   <td>関数値</td>
  </tr>
 </tbody>
</table>

<p><b>図 9</b> 型アイコン</p>

<p>このビューの列選択ボタン (右上にある <img alt="ツリー列選択ボタン"> 部分) により「型」および「フラグ」列も表示できます。型列にはオブジェクトの型をテキストで表示します。フラグには当該オブジェクトで有効な 1 つ以上のフラグを並べます。フラグは図 8 に一覧しています。</p>

<p>対話セッションビューによりローカル変数ビューに表示されている項目が変更された場合、その変更は即座にローカル変数ビューに反映されます。</p>

<p>これを書いている時点ではローカル変数ビューの初期ソート順やグループ分けは調整できません。</p>

<h3 id=".E3.82.B3.E3.83.BC.E3.83.AB.E3.82.B9.E3.82.BF.E3.83.83.E3.82.AF.E3.83.93.E3.83.A5.E3.83.BC" name=".E3.82.B3.E3.83.BC.E3.83.AB.E3.82.B9.E3.82.BF.E3.83.83.E3.82.AF.E3.83.93.E3.83.A5.E3.83.BC">コールスタックビュー</h3>

<p><img align="right" alt="図 10 コールスタックビュー"></p>

<p>「コールスタックビュー」は初期状態ではウィンドウの左下部に表示されます。デバッガが停止するとコールスタックビューには動作中の関数一覧が表示されます。コールスタックビューで一番上の関数がデバッガが停止した関数であり、以降の関数はその呼び出し元、呼び出し元の呼び出し元です。これらの項目はスタックフレームと呼ばれるものです。</p>

<p>スタックフレーム上でダブルクリックすると「現在の」フレームが変更されます。これにより、ソースコードビューにはその関数のソースが表示され、ローカル変数ビューには選択されたスタックフレームに置かれた変数が表示され、対話セッションビューで評価されるスクリプトは当該フレームに関連づけられます。</p>

<p>現在のコールスタックをクリップボードにコピーしたければコンテクストメニューから [対話セッションにスタックをダンプ] を選ぶか、対話セッションで <code>/where</code> と入力してください。こうすることでダンプしたテキストを対話セッションからコピーできます。</p>

<p>以降特定のスタックで Venkman を停止させたくないのであれば、当該スタックフレームのコンテクストメニューで [デバッグしない] をチェックしてください。</p>

<h3 id=".E3.82.BD.E3.83.BC.E3.82.B9.E3.82.B3.E3.83.BC.E3.83.89.E3.83.93.E3.83.A5.E3.83.BC" name=".E3.82.BD.E3.83.BC.E3.82.B9.E3.82.B3.E3.83.BC.E3.83.89.E3.83.93.E3.83.A5.E3.83.BC">ソースコードビュー</h3>

<p><img align="none" alt="図 11 ソースコードビュー: ソースコード、行番号、ブレークポイント"></p>

<p>ソースコードビューは表示のみのファイルビューアです。スクリプトビューで適当なファイルや関数を選択することでファイルや特定の関数の中身を表示することができます。</p>

<p>スクリプト実行がデバッガによって中断されると、ファイルの中断された行がソースコードビューに自動的に表示されます。当該行は見つけやすいように黄色で強調表示されます。</p>

<p>このビューの左の余白をクリックすると、その行にブレークポイントが設定されます。ブレークポイントがちゃんと設定されれば赤い背景の文字「B」を余白に表示し、「読み込まれているスクリプトビュー」および「対話セッションビュー」に反映されます。ブレークポイントはその余白 (「B」の上) を再度クリックすることで削除することができます。ブレークポイントは空行やコメント行など実行可能なコードを含まない行には設定することができません。これらの行では対話セッションビューにブレークポイントが設定できないことを説明するエラーメッセージが表示されます。</p>

<p>ブレークポイントは対話セッションビューからも <code>break</code> や <code>fbreak</code> コマンドにより設定および削除できます。 <code>break</code> コマンドではファイルパターンと行番号を指定します。要求された行番号が実行可能行であるファイルパターンにマッチする読み込まれているファイルすべてにブレークポイントが設定されます。ファイルパターンあるいは行番号にマッチするファイルがなければ、エラーメッセージがコンソールに出力され、コマンドは失敗します。 <code>fbreak</code> コマンドはパターンや行番号にファイルがマッチしなかった場合に「予定ブレークポイント」が記録されることを除いて同じものです。パターンおよび行番号にマッチするファイルが次に読み込まれた時、ブレークポイントが設定されます。このように動作するため <code>fbreak</code> を使えば、まだ読み込まれていないファイルの読み込み時点で即座にブレークポイントが動作するように設定することができます。</p>

<h3 id=".E5.AF.BE.E8.A9.B1.E3.82.BB.E3.83.83.E3.82.B7.E3.83.A7.E3.83.B3.E3.83.93.E3.83.A5.E3.83.BC" name=".E5.AF.BE.E8.A9.B1.E3.82.BB.E3.83.83.E3.82.B7.E3.83.A7.E3.83.B3.E3.83.93.E3.83.A5.E3.83.BC">対話セッションビュー</h3>

<p><img align="none" alt="図 12 対話セッションビュー: コマンドラインインターフェイス"></p>

<p>Venkman 最後の基本ビューこそ、対話セッションビューです。このビューはコマンドラインによってデバッガと対話することができます。</p>

<p>コマンドはテキストボックスに入力し、応答が出力の末尾に追記されます。利用可能な全コマンドを一覧表示するには入力欄 (テキストボックス) に <code>/commands</code> と入力してください。個別のコマンドについてさらなる情報を得るには <code>/help</code> を使用してください。例えば、<code>next</code> コマンドの使用法を知るには <code>/help next</code> と入力してください。</p>

<p>入力欄ではコマンド履歴やコマンド名のタブ補完をサポートしています。コマンド履歴は最後に入力された 20 コマンドを記憶します。上および下矢印キーによって以前のコマンドを再表示させることができます。タブ補完により、コマンドの初めの一部を入力してタブキーを 2 回押すことで、適合するコマンドを確認することができます。マッチするコマンドが 1 つだけであれば、1 度目のタブで自動補完されます。</p>

<h2 id=".E3.83.93.E3.83.A5.E3.83.BC.E3.81.AE.E3.82.AB.E3.82.B9.E3.82.BF.E3.83.9E.E3.82.A4.E3.82.BA" name=".E3.83.93.E3.83.A5.E3.83.BC.E3.81.AE.E3.82.AB.E3.82.B9.E3.82.BF.E3.83.9E.E3.82.A4.E3.82.BA">ビューのカスタマイズ</h2>

<p>Venkman ではアプリケーション中のビューの配置や表示をほぼ完全に制御できます。デバッガは、ドラッグアンドドロップ、サイズ変更、利用ビューの切り替え、更にはデバッガの新しいビューやモジュールの生成を好みに応じて行うことができるフレームワークとして構築されています。最後のものは高度な内容であり、今後の記事で扱われるものですが。</p>

<p>Venkman からビューを取り除くには、単にビューの右上の閉じるボタンをクリックしてください。ビューが再び必要になったら、例えば「読み込まれたスクリプトビュー」からソースファイルを開いてソースを表示したくなった時、ビューは最後に位置していた場所に再表示されます。明示的にビューを再表示するには、デバッガの [表示] &gt; [表示/非表示] メニューから選択してください。ビューを個別の分離したウィンドウとして表示することもできます。ビューを分離するには、ビューの左上の分離ボタンをクリックしてください。</p>

<p>[表示] メニューの [表示/非表示] サブメニューからすべての基本ビューにアクセスできます。個々に表示されるリストは Venkman の基本ビューすべてを表します。どのビューが表示され UI の何処にあるのかを変更するのに応じて設定が保存され、セッションを通して維持されます。</p>

<h2 id=".E3.83.87.E3.83.90.E3.83.83.E3.82.AC.E3.81.B8.E3.81.AE.E3.82.B9.E3.82.AF.E3.83.AA.E3.83.97.E3.83.88.E8.AA.AD.E3.81.BF.E8.BE.BC.E3.81.BF" name=".E3.83.87.E3.83.90.E3.83.83.E3.82.AC.E3.81.B8.E3.81.AE.E3.82.B9.E3.82.AF.E3.83.AA.E3.83.97.E3.83.88.E8.AA.AD.E3.81.BF.E8.BE.BC.E3.81.BF">デバッガへのスクリプト読み込み</h2>

<p>Mozilla スイートのスタートアップ時に Venkman を最初に起動しようとブラウザコンポーネントを最初に起動しようと、JavaScript エンジンは Web ページで読み込まれたスクリプトおよび様々な Mozilla のユーザインターフェイス自体で読み込まれたスクリプトすべてを追跡してコンパイルします。エンジンは認識しているスクリプトを Venkman に伝え、これらのスクリプトはデバッガの「読み込まれているスクリプト」ビューに読み込まれます。</p>

<p>新たにスクリプトを読み込みたければ、例えばトラブルシュートしようとしている Web ページから読み込みたければ、単に Web ページを
 <i>通常のブラウザウィンドウに</i>
 開くだけで読み込むことができます。この時コンパイラは JavaScript のソースを取得し、新しい項目を読み込まれているスクリプトウィンドウに追加します。</p>

<p>Venkman から [ファイル] &gt; [ファイルを開く] を使用すればデバッガでローカルファイルを開き、[ファイル] &gt; [Web から開く] を使用すれば要求ページの HTML コンテントすべてを開いて表示します。とはいえ恐らくどちらも必要ないでしょう。ブラウザが Web ページを開くと JavaScript エンジンは自動的にデバッガの読み込まれているスクリプトリストに JavaScript を追加するので、通常はデバッグしようと考えているスクリプトを含むサイトを単に「ブラウズするだけ」で十分なのです。</p>

<h2 id=".E3.83.87.E3.83.90.E3.83.83.E3.82.B0.E3.81.AE.E5.9F.BA.E6.9C.AC" name=".E3.83.87.E3.83.90.E3.83.83.E3.82.B0.E3.81.AE.E5.9F.BA.E6.9C.AC">デバッグの基本</h2>

<p>この節では基本的なコマンドとデバッガの操作に慣れてもらうために、簡単なセッションのデバッグ例を示します。</p>

<ol>
 <li>
  <p class="what">Venkman を起動</p>

  <p class="why">注: 一時期デバッガはデバッグしたいスクリプトより
   <i>前に</i>
   起動しておく必要がありましたが、現在では JavaScript コンパイラがブラウザによってアクセスするあらゆるスクリプトをデバッガからアクセスできるようにしているので、この制限はなくなりました。Venkman のスクリプト検出と読み込みについて更に詳しくは、<a href="#デバッガへのスクリプト読み込み">デバッガへのスクリプト読み込み</a> を参照してください。</p>
 </li>
 <li>
  <p class="what">ブラウザウィンドウを起動して <a class="external" href="http://wp.netscape.com/fishcam/dhtmltank.html" rel="freelink">http://wp.netscape.com/fishcam/dhtmltank.html</a> を開いてください。</p>

  <p class="why">注: Mozilla 1.x と Netscape 7.x では、デバッガはアプリケーションスイートの他のコンポーネント同様に Window メニューを含んでいます。このメニューからブラウザ、メール、その他のアプリケーションにアクセスできます。</p>
 </li>
 <li>
  <p class="what">デバッガで <code>/break Animator-0.03 121</code> と入力してください。</p>

  <p class="why">コンソールコマンド <code>/break</code> はブレークポイントの設定に使用されます。第 1 パラメータはブレークしたい JavaScript を含んでいるファイルの名前で、第 2 パラメータは行番号です。完全なファイル名を指定する必要はありません。この例ではブレークポイントをブラウザが DHTML fishcam ウィンドウをスタートした時に呼び出される <code>pause</code> 関数に設定しています。</p>
 </li>
 <li>
  <p class="why">コマンドを使用するのではなく、<code class="filename">Animator-0.03.js</code> を読み込まれているスクリプトビューから選択し、119 行目の <code>pause</code> 関数を探し出して左の余白をクリックすることでブレークポイントを設定することもできます。このようにしてブレークポイントを設定するのはコンソールで <code>/break</code> コマンドを使用するのと同じことです。どちらにせよ、赤いブレークポイントアイコンがソースコードビューに現れます。</p>
 </li>
 <li>
  <p class="what">デバッガで <code>/break</code> と入力してください。</p>

  <p class="why"><code>/break</code> コマンドに引数を与えなければすべてのブレークポイントが対話セッションビューに一覧表示されます。</p>
 </li>
 <li>
  <p class="what">fishcam ページで pause リンクを押してください。</p>

  <p class="why">ステップ 3 で設定したばかりのブレークポイントに出くわします。</p>

  <p class="why">対話セッションのラベルに「コンテクスト: Animator-0.03.js, スコープ: [pause]」と表示されます。また、対話セッションにファイル名、行番号、停止箇所のコード断片と共に赤色で「ブレークポイントで停止しました」と出力されます。</p>

  <div class="figure"><img alt="450px"><br>
  <b>図 13</b> (ステップ 5) ブレークポイントで停止しています。</div>
 </li>
 <li>
  <p class="what">対話セッションの入力フィールドに <code>this.fPaused</code> と入力してください。</p>

  <p class="why">Venkman が式を評価し [boolean] <code>false</code> を返します。関数のデバッグが終了するまでステップインを押して処理を追いかけてください。デバッグから抜けると、お魚さんが止まってしまっています。</p>

  <p class="why">JavaScript の 1 行を実行して停止するステップインに加えて、次行の関数呼び出しをまとめて実行してその呼び出しから帰ったところでコントロールをデバッガに戻すステップオーバーも使用できます。ステップアウトは現在の関数呼び出しから抜け出るまで実行します。</p>
 </li>
 <li>
  <p class="what">7. fishcam ページの「pause」というリンクを再度クリックしてデモを再開させてください。</p>

  <p class="why">クリックすると先程とは別の <code>start()</code> のコードによって DHTML がスタートし、お魚さんが再び泳ぎ始めます。</p>
 </li>
</ol>

<p>見ての通り、これは JavaScript デバッガの機能性とスクリプトの複雑性の、とてもささやかな導入に過ぎません。ですが、まだデバッガを使ったことがなければここに書かれた例によりデバッガの大まかな感覚をつかみ、これ以降続く記事中のより面白くて実用的な事例の下支えとなります。</p>

<p>Venkman について知る最良の方法は、もちろん、いじり回すことです。自分の好きなように設定し、スクリプトを読み込んでブレークポイントを設定し、対話セッションビューで式を評価し、スクリプト実行時に変更される変数の値を監視し、プロファイルデータを収集するのです。</p>

<h2 id=".E6.83.85.E5.A0.B1.E6.BA.90" name=".E6.83.85.E5.A0.B1.E6.BA.90">情報源</h2>

<ul>
 <li><a href="ja/Using_Breakpoints_in_Venkman">Venkman のブレークポイント使用法</a>: Venkman に関する次の記事</li>
 <li><a href="ja/Venkman">MDC の Venkman ホームページ</a></li>
</ul>

<div class="originaldocinfo">
<h3 id=".E5.8E.9F.E6.96.87.E6.9B.B8.E3.81.AE.E6.83.85.E5.A0.B1" name=".E5.8E.9F.E6.96.87.E6.9B.B8.E3.81.AE.E6.83.85.E5.A0.B1">原文書の情報</h3>

<ul>
 <li>著者: Ian Oeschger, Robert Ginda</li>
</ul>
</div>
</div>
