---
title: CameraControl.getPreviewStream
slug: Web/API/CameraControl/getPreviewStream
translation_of: Archive/B2G_OS/API/CameraControl/getPreviewStream
---
<p>{{APIRef("Camera API")}}{{ non-standard_header() }}</p>

<h2 id="概述">概述</h2>

<p>该方法用来根据指定的配置,从摄像头获取到一个{{domxref("MediaStream")}}数据流,你可以从该数据流中捕获到静态的照片.</p>

<div class="note">
<p><strong>注:使用该方法获取到的数据流仅能用来捕获静态的照片</strong>.如果你想录制视频,那么必须使用{{domxref("CameraControl.getPreviewStreamVideoMode()")}}方法来代替.</p>
</div>

<h2 id="语法">语法</h2>

<pre>CameraControl.getPreviewStream(options, onsuccess[, onerror]);</pre>

<h3 id="参数">参数</h3>

<dl>
 <dt><code>options</code></dt>
 <dd>一个包含有两个属性<code>width</code>和<code>height的对象</code>.该对象可以通过{{domxref("CameraCapabilities")}}<code>.previewSizes属性获取到.</code></dd>
 <dt><code>onsuccess</code></dt>
 <dd>一个回调函数,会被传入一个参数,这个参数是一个{{domxref("MediaStream")}}数据流对象,可以使用该数据流对象捕获静态的图像.</dd>
 <dt><code>onerror</code> {{optional_inline()}}</dt>
 <dd>一个回调函数,会被传入一个参数,这个参数是一个表示错误原因的字符串.如果在尝试获取<code>MediaStream</code>数据流对象时发生了错误,则会调用该函数.</dd>
</dl>

<h2 id="示例">示例</h2>

<p>这个例子演示了如何通过使用{{domxref("MediaStream")}}数据流对象来从摄像头捕获并播放静态的图片.</p>

<pre class="brush: js">var display = document.getElementsByTagName('video')[0];
var options = {
  camera: navigator.mozCameras.getListOfCameras()[0]
};

function onStreamReady( stream ) {
  display.mozSrcObject = stream;
  display.play();
}

function onAccessCamera( camera ) {
  var size = camera.capabilities.previewSizes[0];

  camera.getPreviewStream(size, onStreamReady);
};

navigator.mozCameras.getCamera(options, onAccessCamera)
</pre>

<h2 id="Specification" name="Specification">规范</h2>

<p>不属于任何规范.当<a class="external" href="http://dev.w3.org/2011/webrtc/editor/getusermedia.html" rel="external" title="http://dev.w3.org/2011/webrtc/editor/getusermedia.html">WebRTC Capture and Stream API</a>实现时,该方法应该会被删除.</p>

<h2 id="相关链接">相关链接</h2>

<ul>
 <li>{{domxref("CameraControl")}}</li>
 <li>{{domxref("MediaStream")}}</li>
 <li>The <code>mozSrcObject</code> property on {{domxref("HTMLMediaElement")}}</li>
</ul>
