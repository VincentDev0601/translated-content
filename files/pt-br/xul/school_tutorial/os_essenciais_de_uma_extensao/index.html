---
title: Os Essenciais de uma Extensão
slug: XUL/School_tutorial/Os_Essenciais_de_uma_Extensao
tags:
  - Chrome
  - Firefox
  - Mozilla
  - Tutorial
  - básico
  - como fazer
  - criação
  - essencial
  - extensão
translation_of: Archive/Add-ons/Overlay_Extensions/XUL_School/The_Essentials_of_an_Extension
---
<p>{{ PreviousNext("XUL/School_tutorial/Comecando_com_as_Extensoes_do_Firefox", "XUL_School/Setting_Up_a_Development_Environment") }}</p>
<h2 id="O_arquivo_install.rdf">O arquivo install.rdf</h2>
<p><span class="long_text" id="result_box" lang="pt"><span class="hps">Na última</span> <span class="hps">seção,</span> <span class="hps alt-edited">nós vimos</span> <span class="hps">o conteúdo da</span> <span class="hps">extensão</span> <span class="hps alt-edited">Hello World</span><span>.</span> <span class="hps">Agora</span> <span class="hps">vamos dar uma olhada</span> <span class="hps">em seus arquivos</span> <span class="hps">e códigos</span><span>, começando com</span> <span class="hps">o arquivo</span> <span class="hps">install.rdf</span><span>.</span> <span class="hps">Você pode</span> <span class="hps">abri-lo com</span> <span class="hps">qualquer editor de texto</span><span>.</span></span></p>
<p><span class="long_text" id="result_box" lang="pt"><span class="hps">O arquivo</span> <span class="hps">está formatado</span> <span class="hps alt-edited">em um "seguimento"</span> <span class="hps">especial de</span> <span class="hps">XML</span> <span class="hps">chamado</span></span> <a class="external" href="http://en.wikipedia.org/wiki/Resource_Description_Framework">RDF</a>. <span class="long_text" id="result_box" lang="pt"><span class="hps">RDF</span> <span class="hps">costumava ser o</span> <span class="hps">mecanismo de armazenamento central</span> <span class="hps">para o Firefox,</span> <span class="hps">mas agora está</span> <span class="hps">sendo substituído</span> <span class="hps">por um</span> <span class="hps">sistema de</span> <span class="hps">banco de dados</span> <span class="hps">mais simples.</span> <span class="hps">Vamos discutir</span> <span class="hps">esses dois</span> <span class="hps">sistemas de armazenamento</span> <span class="hps">mais adiante</span> <span class="hps">no</span> <span class="hps">tutorial.</span></span></p>
<p><span class="long_text" id="result_box" lang="pt"><span class="hps">Agora</span> <span class="hps">vamos olhar para</span> <span class="hps">as partes importantes</span> <span class="hps">do arquivo.</span></span></p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">&lt;em:id&gt;helloworld@xulschool.com&lt;/em:id&gt;</pre>
 </div>
</div>
<p><span class="long_text" id="result_box" lang="pt"><span class="hps">Este é</span> <span class="hps">o identificador exclusivo para</span> <span class="hps">a extensão.</span> <span class="hps">Firefox</span> <span class="hps">precisa disso</span> <span class="hps">para distinguir</span> <span class="hps">a sua extensão</span> <span class="hps alt-edited">de</span> <span class="hps">outras extensões</span><span>, por isso é</span> <span class="hps">necessário</span> <span class="hps">que você tenha um</span> <span class="hps">ID que</span> <span class="hps alt-edited">seja único.</span></span></p>
<p><span class="long_text" id="result_box" lang="pt"><span class="hps">Existem dois</span> <span class="hps">padrões aceitos</span> <span class="hps">para ID de</span> <span class="hps alt-edited">complementos</span><span>.</span> <span class="hps">Um deles é o</span> <span class="hps">formato</span> <span class="hps">de e-mail</span> <span class="hps">como</span> <span class="hps">no exemplo</span> <span class="hps alt-edited">Hello World</span><span>, que</span> <span class="hps">deve ser algo como</span></span><span style="color: #0000ff;"><em>&lt;nome-do-projeto&gt;@&lt;seudominio&gt;</em></span>. <span class="long_text short_text" id="result_box" lang="pt"><span class="hps">A outra</span> <span class="hps">prática comum</span> <span class="hps">é utilizar um</span>a string</span> <a class="external" href="http://en.wikipedia.org/wiki/Uuid">UUID</a> gerada, <span class="long_text" id="result_box" lang="pt"><span class="hps">que é extremamente</span> <span class="hps">improvável</span> <span class="hps alt-edited">que</span> <span class="hps alt-edited">seja duplicada</span><span>.</span> <span class="hps">Sistemas baseados em</span> <span class="hps">Unix</span> <span class="hps">tem uma ferramenta de</span> <span class="hps">linha de comando chamado</span> <span class="hps">uuidgen</span> <span class="hps">que gera</span> <span class="hps">UUIDs</span><span>.</span> <span class="hps">Há também ferramentas</span> <span class="hps">com download disponível para</span> <span class="hps">todas as plataformas que geram</span> <span class="hps">elas</span><span class="hps">.</span> </span><span class="long_text" id="result_box" lang="pt"> <span class="hps">Enquanto o seu</span> <span class="hps">id</span> <span class="hps">tem</span> <span class="hps">alguma exclusividade</span> <span class="hps">para ele,</span> <span class="hps">não há problema em</span> <span class="hps">usar de qualquer</span> <span class="hps">forma</span><span>.</span></span></p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">&lt;em:name&gt;XUL School Hello World&lt;/em:name&gt;
&lt;em:description&gt;Welcome to XUL School!&lt;/em:description&gt;
&lt;em:version&gt;0.1&lt;/em:version&gt;
&lt;em:creator&gt;Appcoast&lt;/em:creator&gt;
<span class="code-comment">&lt;em:homepageURL&gt;https://developer.mozilla.org/en/XUL_School&lt;/em:homepageURL&gt;</span></pre>
 </div>
</div>
<p><span id="result_box" lang="pt"><span class="hps">Estes são os dados</span> <span class="hps">que é exibido</span> <span class="hps">antes e depois da</span> <span class="hps">extensão instalada</span><span>,</span> <span class="hps">que</span> <span class="hps">você pode ver</span> <span class="hps">no Gerenciador de</span> <span class="hps atn">Complementos(Add-</span><span>ons).</span> <span class="hps">Existem muitas outras</span> <span class="hps">marcas que</span> <span class="hps">podem ser adicionadas</span><span>,</span> <span class="hps">para</span> <span class="hps">colaboradores e</span> <span class="hps">tradutores.</span></span> <span id="result_box" lang="pt"><span class="hps">A <a href="https://developer.mozilla.org/en/Install_Manifests#type" title="https://developer.mozilla.org/en/Install_Manifests#type">especificação completa</a></span> <span class="hps">do arquivo</span> <span class="hps">install.rdf</span> <span class="hps">tem todos os detalhes</span><span>.</span></span></p>
<p><span id="result_box" lang="pt"><span class="hps">Desde</span> que <span class="hps">extensões</span> <span class="hps">podem ser traduzidas para</span> <span class="hps">vários idiomas,</span> <span class="hps">muitas vezes é necessário</span><span class="hps"> traduzir</span> <span class="hps">a descrição da</span> <span class="hps">extensão,</span> <span class="hps">ou até mesmo</span> <span class="hps">o seu nome.</span> <span class="hps">A</span> <span class="hps">descrição localizada</span> <span class="hps">eo nome</span> <span class="hps">podem ser adicionados com</span> <span class="hps">o seguinte código:</span></span></p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">&lt;em:localized&gt;
  &lt;Description&gt;
    &lt;em:locale&gt;es-ES&lt;/em:locale&gt;
    &lt;em:name&gt;XUL School Hola Mundo&lt;/em:name&gt;
    &lt;em:description&gt;Bienvenido a XUL School!&lt;/em:description&gt;
  &lt;/Description&gt;
&lt;/em:localized&gt;</pre>
 </div>
</div>
<p>O <em>es-ES</em> <span id="result_box" lang="pt"><span class="hps alt-edited">na string</span> <span class="hps alt-edited">locale</span> <span class="hps">indica que</span> <span class="hps">é Espanhol(es) com</span> <span class="hps">localização</span> <span class="hps">na Espanha</span> <span class="hps">(ES)</span><span>.</span></span> <span class="short_text" id="result_box" lang="pt"><span class="hps">Você pode</span> <span class="hps">adicionar muitos</span></span> <em>&lt;em:localized&gt;</em> se você precisar. <span class="short_text" id="result_box" lang="pt"><span class="hps">Para</span> <span class="hps">Firefox 2</span><span>,</span> <span class="hps">localizar</span> <span class="hps">este arquivo é um</span></span> <a href="/en/Localizing_extension_descriptions#Localizing_before_Gecko_1.9" title="en/Localizing extension descriptions#Localizing before Gecko 1.9">pouco mais complicado</a>. <span id="result_box" lang="pt"><span class="hps">Vamos discutir</span> <span class="hps">a localização</span> <span class="hps">mais adiante</span> <span class="hps">nesta seção.</span></span></p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">&lt;em:type&gt;2&lt;/em:type&gt;</pre>
 </div>
</div>
<p><span id="result_box" lang="pt"><span class="hps">Isto especifica que</span> <span class="hps">o</span> complemento(<span class="hps">add</span><span>-on)</span> <span class="hps">que está sendo instalado</span> <span class="hps">é uma extensão</span><span>.</span> <span class="hps">Você pode ler</span> <span class="hps">sobre os diferentes tipos</span> <span class="hps">possíveis no</span></span> <a href="/en/Install_Manifests#type" title="en/Install Manifests#type">install.rdf</a>.</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">&lt;em:targetApplication&gt;
  &lt;Description&gt;
    &lt;em:id&gt;{ec8030f7-c20a-464f-9b0e-13a3a9e97384}&lt;/em:id&gt;
    &lt;em:minVersion&gt;4.0&lt;/em:minVersion&gt;
    &lt;em:maxVersion&gt;10.*&lt;/em:maxVersion&gt;
  &lt;/Description&gt;
&lt;/em:targetApplication&gt;
</pre>
 </div>
</div>
<p><span id="result_box" lang="pt"><span class="hps alt-edited">Este node</span> <span class="hps">especifica o</span> <span class="hps">aplicativo de destino</span> <span class="hps">e</span> <span class="hps">versões</span> <span class="hps">alvo</span> <span class="hps">para a extensão,</span> <span class="hps">especificamente</span> <span class="hps">Firefox,</span> <span class="hps">a partir da versão</span> <span class="hps">4</span> <span class="hps">até a versão</span> <span class="hps">10.</span> <span class="hps">O</span> <span class="hps">UUID</span> <span class="hps">é</span> <span class="hps">da ID única</span> <span class="hps">Firefox</span><span>.</span> <span class="hps">Outras aplicações</span> <span class="hps">Mozilla e</span> <span class="hps">baseadas no Mozilla</span><span>, como</span> <span class="hps">o Thunderbird</span> <span class="hps">e</span> <span class="hps">Seamonkey</span> <span class="hps">têm a sua própria</span><span>.</span> <span class="hps">Você pode ter</span> <span class="hps">uma extensão que</span> <span class="hps">funciona em vários</span> <span class="hps">aplicativos</span> <span class="hps">e versões.</span> <span class="hps">Por exemplo</span><span>, se você criar</span> <span class="hps">uma extensão do Firefox</span><span>,</span><span class="hps"> normalmente levaria</span> <span class="hps">pouco esforço para</span> <span class="hps">portá-lo para</span> <span class="hps">o SeaMonkey</span><span>, que possui</span> <span class="hps">recursos e</span> <span class="hps">interface do usuário</span> <span class="hps">muito semelhantes.</span></span></p>
<p><span id="result_box" lang="pt"><span class="hps">A versão</span> <span class="hps">mínima(minVersion) e a versão máxima(maxVersion)</span> <span class="hps">especifica o intervalo</span> da <span class="hps">versão em que</span> <span class="hps">a extensão</span> <span class="hps">pode ser instalada.</span></span>. <span class="short_text" id="result_box"><span style="background-color: rgb(235, 239, 249);" title="Here's more about the">Veja mais sobre o</span></span> "<a href="/en/Toolkit_version_format" title="en/Toolkit version format">version format</a>". <span class="long_text" id="result_box"><span style="background-color: rgb(255, 255, 255);" title="If the application or version range don't match, you won't be allowed to install the extension, or the extension will be installed in a disabled state.">Se o intervalo de aplicação ou a versão não coincidirem, você não terá permissão para instalar a extensão, ou a extensão será instalada em um estado desativado.</span></span> <span class="long_text" id="result_box"><span style="background-color: rgb(255, 255, 255);" title="Users can disable version checks through preferences or installing add-ons like the">Os usuários podem desativar verificações de versão através de preferências ou a instalação de add-ons como o</span></span> <a class="link-https" href="https://addons.mozilla.org/pt-BR/firefox/addon/add-on-compatibility-reporter/" title="https://addons.mozilla.org/en-US/firefox/addon/15003">Add-on Compatibility Reporter</a>. <span class="long_text" id="result_box"><span style="background-color: rgb(255, 255, 255);" title="Beginning with Firefox 11, add-ons will default to compatible and Firefox will mostly ignore the version range.">Começando com o Firefox 11, add-ons serão por padrão </span></span><span class="short_text" id="result_box" lang="pt"><span class="hps">compatível</span></span><span class="long_text" id="result_box"><span style="background-color: rgb(255, 255, 255);" title="Beginning with Firefox 11, add-ons will default to compatible and Firefox will mostly ignore the version range."> e o Firefox, na maioria das vezes ignora a faixa de versão. </span><span style="background-color: rgb(255, 255, 255);" title="Testing your add-ons with every Firefox version is always recommended, though.">No Entanto, é sempre recomendável testar seus complementos(add-ons) com cada versão do Firefox.</span></span></p>
<p><span id="result_box" lang="pt"><span class="hps">Qualquer erro</span> <span class="hps">ou falta de informação</span> <span class="hps">fará com que o</span> <span class="hps">processo de instalação</span> <span class="hps">falhe,</span> <span class="hps">ou</span> <span class="hps">a extensão vai ser</span> <span class="hps">instalada</span> <span class="hps">em um estado desativado</span><span>.</span></span></p>
<h2 id="O_arquivo_chrome.manifest">O arquivo chrome.manifest</h2>
<blockquote>
 <p><span style="color: #0000ff;"><span id="result_box" lang="pt"><span class="hps">Chrome</span> <span class="hps">é o conjunto de</span> <span class="hps">elementos</span> <span class="hps">de interface de usuário</span> <span class="hps">da janela do aplicativo</span> <span class="hps">que estão fora</span> <span class="hps">da área de conteúdo</span> <span class="hps">da janela.</span></span></span> <span id="result_box" lang="pt"><span class="hps">Barras de ferramentas,</span> <span class="hps">barras de menus,</span> <span class="hps">barras de progresso e</span> <span class="hps">barras de título</span> <span class="hps">da janela</span><span>, são exemplos de</span> <span class="hps">elementos que</span> <span class="hps">normalmente fazem parte</span> <span class="hps">do chrome.</span></span></p>
</blockquote>
<p>Pego de <a href="/en/Chrome_Registration" title="en/Chrome Registration">Chrome Registration</a>.</p>
<p><span class="long_text" id="result_box" lang="pt"><span class="hps">Em outras palavras,</span> <span class="hps">o</span> C<span class="hps">hrome</span> <span class="hps">é tudo o que</span> <span class="hps">você vê no</span> <span class="hps">Firefox.</span> <span class="hps">Todas as janelas do</span> <span class="hps">Firefox</span> <span class="hps">pode ser visto</span> <span class="hps">como tendo duas partes</span><span>: (1)</span> <span class="hps">o</span> <span class="hps alt-edited">Chrome</span> <span class="hps">e (2)</span><span>, possivelmente,</span> <span class="hps">uma área de conteúdo</span><span>, como o</span> <span class="hps">que exibe</span> <span class="hps">páginas da web</span> <span class="hps">em uma aba</span> <span class="hps">do Firefox.</span> <span class="hps">O Windows</span><span>, como</span> <span class="hps">a janela de</span> <span class="hps">downloads são</span> <span class="hps">puro Chrome.</span> <span class="hps">A maior parte</span> <span class="hps">do código para</span> <span class="hps">uma extensão</span> <span class="hps">reside na pasta</span> <span class="hps">chrome</span><span>, assim como</span> <span class="hps">no exemplo</span> Hello World<span>.</span></span></p>
<p><span class="long_text" id="result_box" lang="pt"><span class="hps">Como vimos</span> <span class="hps">na estrutura de diretório</span> <span class="hps">da extensão</span> <span class="hps">descompactada,</span> <span class="hps">o</span> <span class="hps alt-edited">Chrome</span> <span class="hps">é composto de</span> <span class="hps">três</span> <span class="hps">partes:</span></span> <span style="color: #0000ff;">content</span>, <span style="color: #0000ff;">locale</span> e <span style="color: #0000ff;">skin</span>. <span class="long_text" id="result_box" lang="pt"><span class="hps">Eles</span> <span class="hps">três</span> <span class="hps">são necessários</span> <span class="hps">para a maioria das</span> <span class="hps">extensões.</span> <span class="hps">Se abrirmos</span> <span class="hps">o arquivo</span> <em><span class="hps">chrome.manifest</span></em> <span class="hps">(novamente,</span> <span class="hps">qualquer editor de texto</span> <span class="hps">serve)</span><span>, vemos que</span> <span class="hps">as mesmas</span> <span class="hps">três</span> <span class="hps">seções</span> <span class="hps">são mencionadas</span><span>:</span></span></p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">content   xulschoolhello              content/
skin      xulschoolhello  classic/1.0 skin/
locale    xulschoolhello  en-US       locale/en-US/
</pre>
 </div>
</div>
<p><span style="color: #0000ff;">O arquivo <em>chrome.manifest</em>  fala ao Firefox onde procurar por arquivos chrome.</span> <span class="long_text" id="result_box" lang="pt"><span class="hps">O texto</span> <span class="hps">é espaçado</span> <span class="hps">para parecer uma</span> planilha<span class="hps">,</span> <span class="hps">mas isso</span> <span class="hps">não é necessário.</span> <span class="hps">O analisador</span> <span class="hps">ignora</span> <span class="hps">espaços</span> <span class="hps">repetidos.</span></span></p>
<p><span class="long_text" id="result_box" lang="pt"><span class="hps">A primeira palavra</span> <span class="hps">em uma linha</span> <span class="hps">diz</span> ao <span class="hps">Firefox</span> <span class="hps">o que é que</span> <span class="hps">está sendo</span> <span class="hps atn">declarado (</span><span>conteúdo</span><span>, skin,</span> locale<span>,</span> <span class="hps">ou</span> <span class="hps">outros mencionados</span> <span class="hps">mais tarde)</span><span>.</span> <span class="hps">O segundo é</span> <span class="hps">o nome do pacote</span><span>, que</span> <span class="hps">vamos explicar</span> <span class="hps">em breve.</span></span></p>
<p><span id="result_box" lang="pt"><span class="hps">Pacotes</span> <span class="hps alt-edited">Skin</span> <span class="hps alt-edited">e locale</span> <span class="hps">tem</span> <span class="hps">um terceiro valor</span> <span class="hps">para especificar</span> <span class="hps">o</span> <span class="hps">local ou</span> <span class="hps alt-edited">qual</span> skin <span class="hps">eles</span> <span class="hps">estão usando</span><span>.</span></span><span id="result_box" lang="pt"><span class="hps"> Pode haver</span> mais de uma skin<span class="hps"> e</span> <span class="hps">locales</span> </span>escolhidos. <span id="result_box" lang="pt"><span class="hps">O caso mais</span> <span class="hps">comum é usar uma skin</span> <span class="hps">mundial</span></span>, a "<em>classic/1.0"</em>, <span class="short_text" id="result_box" lang="pt"><span class="hps">e</span> <span class="hps">múltiplos</span> <span class="hps">locale</span></span>, um para cada tradução. <span class="short_text" id="result_box" lang="pt"><span class="hps">Finalmente, a localização</span> <span class="hps">esta especificada.</span></span></p>
<p><span id="result_box" lang="pt"><span class="hps">Existem algumas opções</span> <span class="hps">adicionais que podem ser</span> <span class="hps">incluídos nas</span> <span class="hps">linhas de um</span> <span class="hps">arquivo</span> <span class="hps">chrome.manifest</span><span>.</span></span> Elas estão documentadas na página <a href="/pt-BR/docs/Chrome_Registration" title="en/Chrome Registration">Chrome Registration</a>. Notavelmente, podemos especificar configurações para um SO específico. Isto é muito importante porque a aparência do navegador é muito diferente em cada Sistema Operacional. Se nossa extensão precisa ser diferente em sistemas diferentes, nós podemos mudar o arquivo manifest para se parecer com isso:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">content   xulschoolhello              content/
skin      xulschoolhello  classic/1.0 skin/unix/
skin      xulschoolhello  classic/1.0 skin/mac/ os=Darwin
skin      xulschoolhello  classic/1.0 skin/win/ os=WinNT
locale    xulschoolhello  en-US       locale/en-US/
</pre>
 </div>
</div>
<p>Desta maneira podemos separar skins para o Windows, Mac OS X, e Linux (<span class="short_text" id="result_box" lang="pt"><span class="hps">além de outros</span> <span class="hps">sistemas tipo Unix</span></span>), <span class="short_text" id="result_box" lang="pt"><span class="hps">cada uma definida</span> <span class="hps">em um diretório separado</span></span>. <span id="result_box" lang="pt"><span class="hps">Como a maioria dos</span> <span class="hps">outros sistemas</span> <span class="hps">são baseados em</span> <span class="hps">Unix</span><span class="atn">, a skin "</span><span>unix</span><span>"</span> <span class="hps">é a padrão,</span> <span class="hps">sem</span> flags<span>.</span></span></p>
<h2 id="O_Chrome">O Chrome</h2>
<p>Como mencionado anteriormente, o chrome é composto de 3 seções: content, locale e skin. O content é a mais importante seção, com a <span id="result_box" lang="pt"><span class="hps atn">interface de usuário (</span><span>XUL</span><span>)</span> <span class="hps">e</span> <span class="hps atn">arquivos de script (</span><span>JS</span><span>)</span><span>.</span></span> A seção skin tem os arquivos que definem mais a aparência e visual da UI (usando CSS e imagens, igual páginas da web). Finalmente, a seção locale tem todo texto usado na extensão, em DTD e <span class="short_text" id="result_box" lang="pt"><span class="hps">arquivos de propriedades</span></span>. Está divisão permite outros desenvolvedores criarem temas para substituir as skins, e criar traduções em diferentes linguagens, tudo isso sem ter que mudar sua extensão ou seu code(código). Isto dá as extensões do Firefox grande flexibilidade.</p>
<p>Arquivos Chrome são accessados através do protocolo chrome. Isto precisa de uma chrome URI parecida com isso:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">chrome:<span class="code-comment">//nomedopacote/seção/caminho/para/arquivo</span></pre>
 </div>
</div>
<p>Então, para instância, se você quer acessar o arquivo <em>browserOverlay.xul </em>na extensão, a chrome URI pode ser<em> <a><span class="external">chrome://xulschoolhello/content/browserOverlay.xul</span></a></em></p>
<p><span id="result_box" lang="pt"><span class="hps">Se</span> <span class="hps">você tem</span> <span class="hps">muitos arquivos</span> <span class="hps alt-edited">no content</span> <span class="hps">e quer</span> <span class="hps">organizá-los</span> <span class="hps">em subdiretórios</span><span>,</span> <span class="hps">não há nada que</span> <span class="hps">você precisa mudar</span> <span class="hps">em</span> <span class="hps">chrome.manifest</span><span>, tudo que você</span> <span class="hps">precisa é adicionar</span> <span class="hps">o caminho certo</span> <span class="hps">depois de</span> <span class="hps">content na</span> <span class="hps">URI.</span></span></p>
<p>Arquivos Skin e locale funcionam do mesmo jeito, e você não precisa especificar nome das skins ou nomes dos locale. Então, para acessar o arquivo DTD na extensão Hello World, o caminho chrome é <em><a class="external" rel="freelink">chrome://xulschoolhello/locale/browserOverlay.dtd</a></em>. O Firefox sabe qual locale procurar.</p>
<p>Este é um experimento interessante. Abra uma nova Aba do Firefox, escreva <em><a class="external" rel="freelink">chrome://mozapps/content/downloads/downloads.xul</a></em> na sua barra de endereços e pressione ENTER. Surpreso? Você só acabou de abrir a janela de Downloads em uma Aba do Firefox! Você pode acessar qualquer arquivo chrome só escrevendo esta URI na barra de endereços. Isto pode ser conveniente se você quer inspecionar arquivos de script que são parte do Firefox, outras extensões, ou a sua própria. A maioria destes arquivos são abertos como arquivos de texto, com a exceção de arquivos XUL, os quais são executados e mostrados como você normalmente vê em uma janela.</p>
<h3 id="Content">Content</h3>
<p>Existe 2 arquivos na pasta content. Vamos ver o arquivo XUL primeiro.</p>
<p>Arquivos <a href="/en/XUL" title="en/XUL">XUL</a> são arquivos XML que definem os elementos da interface de usuário no Firefox e Extensões Firefox. XUL foi inspirado em HTML, então você irá ver muita coisa parecida entre as duas. Porém, XUL é também uma melhoria sobre o HTML, tendo aprendido de muitos erros cometidos durante a evolução do HTML. XUL permite á você criar ricas e mais interativas interfaces do que o HTML permitirá, ou pelo menos XUL é mais fácil.</p>
<p>Arquivos XUL usualmente definem uma das duas coisas: janelas ou overlays. O arquivo que você tinha aberto antes, <em>downloads.xul</em>, tem o código que define a janela de Downloads. O Arquivo XUL incluído na extensão Hello World é um overlay. Um overlay amplia uma janela existente, adicionando novos elementos nela ou substituindo alguns elementos dela. A linha que nós pulamos no arquivo <em>chrome.manifest</em> coloca que este arquivo XUL é um overlay para a janela principal do navegador:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">overlay chrome:<span class="code-comment">//browser/content/browser.xul  chrome://xulschoolhello/content/browserOverlay.xul</span></pre>
 </div>
</div>
<p>Com esta linha, O Firefox sabe que isso precisa pegar o conteúdo de <em>browserOverlay.xul</em> e colocar esse overlay na janela principal do navegador, <em>browser.xul</em>. Você pode declarar overlays para qualquer janela ou diálogo no Firefox, mas overlays na janela principal do navegador é de longe o caso mais comum.</p>
<p>Agora vamos ver o conteúdo do nosso arquivo XUL. Nós iremos pular algumas linhas do começo <span class="short_text" id="result_box" lang="pt"><span class="hps">pois se referem a</span> <span class="hps">skin</span> <span class="hps">e o locale</span></span>, <span class="short_text" id="result_box" lang="pt"><span class="hps">e vamos</span> <span class="hps">ver elas</span> <span class="hps">mais tarde</span></span>.</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">&lt;overlay id="xulschoolhello-browser-overlay"
  xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"&gt;</pre>
 </div>
</div>
<p>O elemento raiz no arquivo é um <em>overlay</em>. Outros documentos XUL usam a tag <em>window</em> ou <em>dialog</em>. <span class="short_text" id="result_box" lang="pt"><span class="hps">O elemento tem</span> <span class="hps">um id único</span></span>, <span id="result_box" lang="pt"><span class="hps">que</span> <span class="hps">você deve ter na</span> <span class="hps">maioria dos elementos</span> <span class="hps">no seu</span> <span class="hps">XUL</span></span>. O segundo atributo é o namespace, <span id="result_box" lang="pt"><span class="hps">que é algo que</span> <span class="hps">você deve sempre</span> <span class="hps">definir</span> <span class="hps">em</span> <span class="hps">seu</span> <span class="hps">elemento raiz do arquivo</span> <span class="hps">XUL</span><span>.</span></span> <span class="short_text" id="result_box" lang="pt"><span class="hps">Ela diz que</span> <span class="hps">esse node e</span> <span class="hps">todos os outros nodes filhos</span> <span class="hps">são</span> <span class="hps">XUL</span><span>.</span></span> Você só precisa alterar as declarações de namespace quando você mistura diferentes tipos de conteúdo no mesmo documento, tal como XUL com HTML ou SVG.</p>
<div class="panel" style="border-width: 1px;">
 <div class="panelContent">
  <div class="note">
   <span id="result_box" lang="pt"><span class="hps">Você deve ter notado</span> <span class="hps">a nomeação</span> <span class="hps">usamos</span> <span class="hps">em</span> <span class="hps">vários lugares</span></span>, como a id <em>xulschoolhello-browser-overlay</em>. <span id="result_box" lang="pt"><span class="hps">Este é o </span><span class="hps">namespace padrão</span> <span class="hps">que usamos para</span> <span class="hps">evitar conflitos com</span> <span class="hps">Firefox</span> <span class="hps">e outras extensões</span><span>,</span> <span class="hps">bem como fazer</span> <span class="hps">algumas tarefas de desenvolvimento</span> <span class="hps">mais fácil. Nós colocamos namespace em todos ids e classes de estilo(style classes) nos elementos do overlay porque eles vão ser misturados com outros elementos na janela principal do navegador.</span></span> Se usássemos ids como "<em>container"</em> ou "<em>input"</em>, elas iriam entrar em conflito com as ids usadas no Firefox, ou com as ids de overlays de outra extensão. Usando namespace minimiza problemas de compatibilidade com outras extensões. Nós usamos <a href="http://pt.wikipedia.org/wiki/CamelCase">CamelCasing</a> para nomes de arquivos, e letras <span class="short_text" id="result_box" lang="pt"><span class="hps">minúsculas</span></span> com <span class="short_text" id="result_box" lang="pt"><span class="hps alt-edited">hífens</span></span> para ids de elementos e nomes de classes(class names) de estilo CSS(CSS style), mas você é livre para usar seu próprio sistema.</div>
 </div>
</div>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">&lt;script type=<span class="code-quote">"application/x-javascript"</span>
  src=<span class="code-quote">"chrome:<span class="code-comment">//xulschoolhello/content/browserOverlay.js"</span> /&gt;</span></pre>
 </div>
</div>
<p>Como no HTML, isto incluí um arquivo de script JavaScript. Você pode ter quantos "<em>script</em> elements" precisar em um documento XUL. Nós iremos ver isto no code(código) depois.</p>
<div class="panel" style="border-width: 1px;">
 <div class="panelContent">
  <div class="note">
   Você também deve ter notado como vamos formatar nosso código, e perguntar sobre as regras que se seguem. Nossa regra geral sobre o comprimento da linha é não ter linhas com mais de 80 caracteres. Isso parece muito restritivo, especialmente com arquivos XML, mas o número foi escolhido para permitir que praticamente qualquer editor de texto pudesse manipular esses arquivos facilmente. Mesmo os antigos editores de linha de comando funcionam bem com arquivos que tem linhas de 80 caracteres. A tabulação é muito simples: dois travessões, espaço em branco. A maioria dos nossos padrões de codificação são baseados em Mozilla ou de outros padrões conhecidos e utilizados.</div>
 </div>
</div>
<p> Nós pulamos algum code(código) que será visto na seção locale, indo para a parte mais importante do conteúdo:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">&lt;menubar id="main-menubar"&gt;
  &lt;menu id="xulschoolhello-hello-menu" label="&amp;xulschoolhello.hello.label;"
    accesskey="&amp;xulschoolhello.helloMenu.accesskey;" insertafter="helpMenu"&gt;
    &lt;menupopup&gt;
      &lt;menuitem id="xulschoolhello-hello-menu-item"
        label="&amp;xulschoolhello.hello.label;"
        accesskey="&amp;xulschoolhello.helloItem.accesskey;"
        oncommand="XULSchoolChrome.BrowserOverlay.sayHello(event);" /&gt;
    &lt;/menupopup&gt;
  &lt;/menu&gt;
&lt;/menubar&gt;

&lt;vbox id="appmenuSecondaryPane"&gt;
  &lt;menu id="xulschoolhello-hello-menu-2" label="&amp;xulschoolhello.hello.label;"
    accesskey="&amp;xulschoolhello.helloMenu.accesskey;"
    insertafter="appmenu_addons"&gt;
    &lt;menupopup&gt;
      &lt;menuitem id="xulschoolhello-hello-menu-item-2"
        label="&amp;xulschoolhello.hello.label;"
        accesskey="&amp;xulschoolhello.helloItem.accesskey;"
        oncommand="XULSchoolChrome.BrowserOverlay.sayHello(event);" /&gt;
    &lt;/menupopup&gt;
  &lt;/menu&gt;
&lt;/vbox&gt;
</pre>
 </div>
</div>
<p>Este code(código) adiciona o menu <em>Hello World</em> na janela do navegador.</p>
<p>(Nota: Tradução incompleta temporariamente.)</p>
<p>There are two similar code blocks, because in modern versions of Firefox, particularly on Windows, a single Firefox menu button is presented, with simplified menu options, rather than an extensive menu bar. The second code block covers the common menu button case; the first code block covers all other cases. Check <em>Menu Bar </em>under the <em>Options </em>menu of the menu button to toggle display of the classic menu on Windows and some Linux distributions.</p>
<p>In order to write this code, we needed some knowledge of the XUL code in <em>browser.xul</em>. We needed to know that the id of the right pane in the unified menu is <em>appmenuSecondaryPane</em>. We're adding a menu of our own, and telling Firefox to add it in that pane, right after the Add-ons item. That's the purpose of the attribute:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">insertafter=<span class="code-quote">"appmenu_addons"</span>
</pre>
 </div>
</div>
<p><em>appmenu_addons</em> is the id of the menu element that corresponds to the Add-ons menu item in the main menu. We'll see later how we can find out things like the ids of browser elements, but for now let's look at the elements that compose the Hello World menu.</p>
<p>For the classic menu, we added the Hello World menu right in the "root" of the menu so that it would be very easy for you to spot it, but this is not a recommended practice. Imagine if all extensions added menus to the top menu; having a few extensions would make it look like an airplane dashboard, full of knobs and switches. In the case of the unified menu, things are a little more difficult due to lack of options. If your menu item fits in the Web Developer section, it is recommended that you add it there. Otherwise, the root menu might be your only recourse.</p>
<p>One recommended location for menus in the classic menu vase is under the <em>Tools</em> menu, so the code should really look like this:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">&lt;menupopup id=<span class="code-quote">"menu_ToolsPopup"</span>&gt;
  &lt;menu id=<span class="code-quote">"xulschoolhello-hello-menu"</span> label=<span class="code-quote">"&amp;</span><span class="code-quote">xulschoolhello</span><span class="code-quote">.hello.label;"</span>
    accesskey=<span class="code-quote">"&amp;</span><span class="code-quote">xulschoolhello</span><span class="code-quote">.helloMenu.accesskey;"</span>
    insertbefore=<span class="code-quote">"</span>devToolsEndSeparator<span class="code-quote">"</span>&gt;
    &lt;menupopup&gt;
      &lt;menuitem id=<span class="code-quote">"</span><span class="code-quote">xulschoolhello</span><span class="code-quote">-hello-menu-item"
      </span>  label=<span class="code-quote">"&amp;</span><span class="code-quote">xulschoolhello</span><span class="code-quote">.hello.label;"</span>
        accesskey=<span class="code-quote">"&amp;</span><span class="code-quote">xulschoolhello</span><span class="code-quote">.helloItem.accesskey;"</span>
        oncommand=<span class="code-quote">"XULSchoolChrome.BrowserOverlay.sayHello(event);"</span> /&gt;
    &lt;/menupopup&gt;
  &lt;/menu&gt;
&lt;/menupopup&gt;
</pre>
 </div>
</div>
<p>We're overlaying the menu that is deeper into the XUL tree, but it doesn't matter because all we need is the id of the element we want to overlay. In this case it is the <a href="/en/XUL/menupopup" title="en/XUL/menupopup">menupopup</a> element that's inside of the Tools <a href="/en/XUL/menu" title="en/XUL/menu">menu</a> element. The <em>insertbefore</em> attribute tells Firefox to add the menu at the bottom of the dev tools section, above its end separator. We'll discuss more about menus later on in the tutorial.</p>
<p>Now let's look at the actual code:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">oncommand=<span class="code-quote">"XULSchoolChrome.BrowserOverlay.sayHello(event);"</span>
</pre>
 </div>
</div>
<p>This attribute defines an event handler. The <em>command</em> event is the most frequently used in Firefox, since it corresponds to the main action for most UI elements. The value of the attribute is JavaScript code that invokes a function. This function is defined in the JS file that was included with the <em>script</em> tag. The JS function will be called once the user clicks on the menu item in the Hello World menu. All event handlers define a special object named <em>event</em>, which is usually good to pass as an argument to the function. Event handlers are explained in greater depth further ahead.</p>
<p>Now let's look at the JavaScript file and see what's going on when the event is fired.</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="brush: js">/**
 * XULSchoolChrome namespace.
 */
if ("undefined" == typeof(XULSchoolChrome)) {
  var XULSchoolChrome = {};
};</pre>
 </div>
</div>
<p>The <em>XULSchoolChrome</em> namespace is defined. All objects and variables we define in this JavaScript are global, meaning that scripts in Firefox and other extensions can see them and interact with them. This also means that if we define an object called <em>MenuHandler</em> or some other generic name, it's likely going to conflict with an existing object. What we do here is define a single global object: <em>XULSchoolChrome</em>. Now we know that all of our objects are inside this object, which is unlikely to be duplicated or overwritten by other extensions.</p>
<p>You can read more about the <a href="/en/JavaScript/Reference/Operators/typeof" title="en/Core JavaScript 1.5 Reference/Operators/Special Operators/typeof Operator"><span class="external">typeof operator</span></a>. If you're unfamiliar with JavaScript or this particular syntax, initializing an object as <em>{}</em> is the equivalent of initializing it to <em>new Object()</em>.</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="brush: js">/**
 * Controls the browser overlay <span class="code-keyword">for</span> the Hello World extension.
 */
XULSchoolChrome.BrowserOverlay = {</pre>
 </div>
</div>
<p>Finally, <em>BrowserOverlay</em> is our object. Naming and referencing  objects in such a long and verbose manner can feel uncomfortable at first, but it's worth the cost.</p>
<div class="panel" style="border-width: 1px;">
 <div class="panelContent">
  <div class="note">
   We use <a class="external" href="http://java.sun.com/j2se/javadoc/writingdoccomments/index.html">Javadoc</a> style comments on all namespaces, objects and object members. This is a similar standard to the one used in Mozilla code, and some tools can generate documentation automatically from Javadoc.</div>
 </div>
</div>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="brush: js">sayHello : function(aEvent) {
  let stringBundle = document.getElementById("xulschoolhello-string-bundle");
  let message = stringBundle.getString("xulschoolhello.greeting.label");

  window.alert(message);
}</pre>
 </div>
</div>
<p>And, finally, this is our function declaration. Three lines of code are all we need for it to work. The first line in the body of the function declares a variable that will hold the <a href="/en/XUL/stringbundle" title="en/XUL/stringBundle">stringbundle</a> element defined in the overlay. The variable is declared using <em>let,</em> which is similar to <em>var</em> but with more restricted scope. Here you can read more about <a href="/en/JavaScript/Reference/Statements/let" title="let"><span class="external">let declarations</span>.</a></p>
<p>Just like in regular JS, we can use the <a href="/en/DOM" title="en/DOM"><span class="external">DOM</span></a> (Document Object Model) in order to manipulate the XUL document. First we get a reference of the <a href="/en/XUL/stringbundle" title="en/XUL/stringbundle"><span class="external">stringbundle element</span></a> in the document. This is a special element that allows us to obtain localized strings dynamically, by only providing a "key" that identifies the string. This is what we do on the second line. We call the <a href="/en/XUL/stringbundle#m-getString" title="en/XUL/stringbundle#m-getString">getString method</a> of the bundle element and get the localized message to be displayed. We then call the <a href="/en/DOM/window.alert" title="en/DOM/window.alert">window.alert</a> function with the message, just like we would do in an HTML document.</p>
<h3 id="Locale">Locale</h3>
<p>There are two types of locale files: DTD and properties, and in this example we use them both. DTD is the most efficient way of showing text in XUL, so you should use it whenever possible. It is somewhat inflexible so it can't be used for dynamically generated text, hence the need for an alternate way of getting localized strings.</p>
<p>Looking back at the menu code, you probably noticed some attributes such as this:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">label=<span class="code-quote">"&amp;xulschoolhello.hello.label;"</span> accesskey=<span class="code-quote">"&amp;xulschoolhello.helloItem.accesskey;"</span></pre>
 </div>
</div>
<p>These attributes define the text that you see on the menus, and they are string keys that are defined in our DTD file, <em>browserOverlay.dtd</em>. The DTD file was included in the XUL file with the following code:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">&lt;!DOCTYPE overlay SYSTEM "chrome://xulschoolhello/locale/browserOverlay.dtd" &gt;</pre>
 </div>
</div>
<p>And in the DTD file you can see the association between keys and localized strings:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">&lt;!ENTITY xulschoolhello.hello.label            <span class="code-quote">"Hello World!"</span>&gt;
&lt;!ENTITY xulschoolhello.helloMenu.accesskey    <span class="code-quote">"l"</span>&gt;
&lt;!ENTITY xulschoolhello.helloItem.accesskey    <span class="code-quote">"H"</span>&gt;</pre>
 </div>
</div>
<p>Notice that on the XUL file you enclose the string key with <em>&amp;</em> and <em>;</em> while on the DTD file you only specify the key. You may get weird parsing errors or incorrect localization if you don't get this right.</p>
<p>Access keys are the shortcuts that allow you to quickly navigate a menu using only the keyboard. They are also the only way to navigate a menu for people with accessibility problems, such as partial or total blindness, or physical disabilities that make using a mouse very difficult or impossible. You can easily recognize the access keys on Windows because the letter that corresponds to the access key is underlined, as in the following image:</p>
<div>
 <p><img alt="" class="internal" src="../../../../@api/deki/files/4226/=accesskeys.png" style="width: 167px; height: 58px;"></p>
</div>
<p>Most user interface controls have the <em>accesskey</em> attribute, and you should use it. The value of the access key is localized because it should match a letter in the label text. You should also be careful to avoid access key repetition. For example, within a menu or submenu, access keys should not be repeated. In a window you have to be more careful picking access keys because there are usually more controls there. You have to be specially careful when picking access keys on an overlay. In our case, we can't use the letter "H" as an accesskey in the Main menu item, because it would be the same as the access key in the Help menu. Same goes with "W" and the Window menu on Mac OS. So we settled on the letter "l".</p>
<p>DTD strings are resolved and set when the document is being loaded. If you request the <em>label</em> attribute value for the Hello World menu using DOM, you get the localized string, not the string key. You cannot dynamically change an attribute value with a new DTD key, you have to set the new value directly:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="brush: js">let helloItem = document.getElementById(<span class="code-quote">"xulschoolhello-hello-menu-item"</span>);

<span class="code-comment">// The alert will say <span class="code-quote">"Hello World!"</span>
</span>alert(helloItem.getAttribute(<span class="code-quote">"label"</span>));
<span class="code-comment">// Wrong
</span>helloItem.setAttribute(<span class="code-quote">"label"</span>, <span class="code-quote">"&amp;</span><span class="code-quote">xulschoolhello</span><span class="code-quote">.hello2.label;"</span>);
<span class="code-comment">// Better
</span>helloItem.setAttribute(<span class="code-quote">"label"</span>, <span class="code-quote">"Alternate message"</span>);
<span class="code-comment">// Right!
</span>helloItem.setAttribute(<span class="code-quote">"label"</span>, someStringBundle.getString(<span class="code-quote">"</span><span class="code-quote">xulschoolhello</span><span class="code-quote">.hello2.label"</span>));</pre>
 </div>
</div>
<p>This is the reason DTD strings are not a solution for all localization cases, and the reason we often need to include string bundles in XUL files:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">&lt;stringbundleset id="stringbundleset"&gt;
  &lt;stringbundle id="xulschoolhello-string-bundle"
    src="chrome://xulschoolhello/locale/browserOverlay.properties" /&gt;
&lt;/stringbundleset&gt;</pre>
 </div>
</div>
<p>The <a href="/en/XUL/stringbundleset" title="en/XUL/stringbundleset">stringbundleset</a> element is just a container for <a href="/en/XUL/stringbundle" title="en/XUL/stringbundle">stringbundle</a> elements. There should only be one per document, which is the reason why we overlay the <em>stringbundleset</em> that is in <em>browser.xul</em>, hence the very generic id. We don't include the <em>insertbefore</em> or <em>insertafter</em> attributes because the ordering of string bundles doesn't make a difference. The element is completely invisible. If you don't include any of those ordering attributes in an overlay element, Firefox will just append your element as the last child of the parent element.</p>
<p>All you need for the string bundle is an id (to be able to fetch the element later) and the chrome path to the properties file. And, of course, you need the properties file:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">xulshoolhello.greeting.label = Hi! How are you?</pre>
 </div>
</div>
<p>The whitespace around the equals sign is ignored. Just like in <em>install.rdf</em>, comments can be added using the # character at the beginning of the line. Empty lines are ignored as well.</p>
<p>You will often want to include dynamic content as part of localized strings, like when you want to inform the user about some stat related to the extension. For example: "Found 5 words matching the search query". Your first idea would probably be to simply concatenate strings, and have one "Found" property and another "words matching..." property. This is not a good idea. It greatly complicates the work of localizers, and grammar rules on different languages may change the ordering of the sentence entirely. For this reason it's better to use parameters in the properties:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">xulshoolhello.search.label = Found %S words matching the search query!</pre>
 </div>
</div>
<p>Then you use <a href="/en/XUL/stringbundle#m-getFormattedString" title="en/XUL/stringbundle#m-getFormattedString">getFormattedString</a> instead of <em>getString</em> in order to get the localized string. Thanks to this we don't need to have multiple properties, and life is easier for translators. You can read more about it on the <a href="/en/XUL_Tutorial/Property_Files#Text_Formatting" title="en/XUL Tutorial/Property Files#Text Formatting">Text Formatting section</a> of the XUL Tutorial. Also have a look at the <a href="/en/Localization_and_Plurals" title="en/Localization and Plurals">Plurals and Localization</a> article, that covers a localization feature in Firefox that allows you to further refine this last example to handle different types of plural forms that are also language-dependent.</p>
<h3 id="Skin">Skin</h3>
<p>Styling XUL is very similar to styling HTML. We'll look into some of the differences when we cover the XUL Box Model, and other more advanced topics. There isn't much styling you can do to a minimal menu and a very simple alert message, so the Hello World extension only includes an empty CSS file and the compulsory global skin file:</p>
<div class="code panel" style="border-width: 1px;">
 <div class="codeContent panelContent">
  <pre class="code-java">&lt;?xml-stylesheet type=<span class="code-quote">"text/css"</span> href=<span class="code-quote">"chrome:<span class="code-comment">//global/skin/"</span>  ?&gt;
</span>&lt;?xml-stylesheet type=<span class="code-quote">"text/css"</span>
  href=<span class="code-quote">"chrome:<span class="code-comment">//xulschoolhello/skin/browserOverlay.css"</span>  ?&gt;</span></pre>
 </div>
</div>
<p>The global skin CSS file holds the default styles for all XUL elements and windows. Forgetting to include this file in a XUL window usually leads to interesting and often unwanted results. In our case we don't really need to include it, since we're overlaying the main browser XUL file, and that file already includes this global CSS. At any rate it's better to always include it. This way it's harder to make the mistake of not including it. You can enter the chrome path in the location bar and inspect the file if you're curious.</p>
<p>This covers all of the files in the Hello World extension. Now you should have an idea of the basics involved in extension development, so now we'll jump right in and set up a development environment. But first, a little exercise.</p>
<h2 id="Exercise">Exercise</h2>
<p>Make the following changes to the example extension:</p>
<ul>
 <li>Edit the welcome message that is displayed in the alert window.</li>
 <li>Move the Hello World menu to the <em>Tools</em> menu, where it belongs.</li>
</ul>
<p>Repackage the XPI. Issue the following command from within the extension root directory on Linux or Mac OS X:</p>
<pre>zip ../xulschoolhello2.xpi *
</pre>
<p>On Windows, use a ZIP tool to compress all files and subdirectories within the extension root directory. Name the file with extension <em>.xpi</em></p>
<p>Re-install the XPI. You can just drag the XPI file to the browser and it will be installed locally.</p>
<p>Test it and verify your changes worked. If you run into problems at installation, it's likely that you didn't reproduce the XPI structure correctly, maybe adding unnecessary folders.</p>
<div class="note">
 <strong>Note:</strong> Packaging an extension is really just creating a ZIP archive of the contents of the main folder, then changing the filename extension to <code>.XPI</code>. Do <strong>not</strong> zip the containing folder, just its contents. The <code>content</code> folder, <code>chrome.manifest</code>, <code>install.rdf</code>, and other files and directories should be at the root level of your archive. If you zip the containing folder, your extension will not load.</div>
<p>Note that the <em>Tools </em>menu is hidden by default on Firefox 4 and above, on Windows and some Linux distributions. Check <em>Menu Bar </em>under the <em>Options </em>menu of the Firefox menu button to enable it.</p>
<p>Once you're done, you can look at this reference solution: <a href="/@api/deki/files/5141/=xulschoolhello2.xpi" title="https://developer.mozilla.org/@api/deki/files/5141/=xulschoolhello2.xpi">Hello World 2</a>.</p>
<p>{{ PreviousNext("XUL/School_tutorial/Comecando_com_as_Extensoes_do_Firefox", "XUL_School/Setting_Up_a_Development_Environment") }}</p>
<p><span style="font-size: small;">This tutorial was kindly donated to Mozilla by Appcoast.</span></p>
